<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> PullReview |     Review of branch master
</title>
    <meta name="description" content="Get PullReview: Automated Code Reviews for your GitHub Ruby
      projects. Code, push and get feedback about your last changes and branches.
      PullReview helps you to improve and keep your code clean, review after
      review.">
    <meta name="author" content="PullReview team">
    <link href="PullReview%20%7C%20Review%20of%20branch%20master_archivos/font-awesome.css" rel="stylesheet">
    <link href="PullReview%20%7C%20Review%20of%20branch%20master_archivos/css_002.css" rel="stylesheet" type="text/css">
    <link href="PullReview%20%7C%20Review%20of%20branch%20master_archivos/css.css" rel="stylesheet" type="text/css">

    <link href="PullReview%20%7C%20Review%20of%20branch%20master_archivos/application-b65cede1100ccff535afe0465c59bd70.css" media="all" rel="stylesheet">
    <script src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/analytics.js" async=""></script><script src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/application-7468c1d00fe976ebc77b5616f6d551ad.js"></script>
    
      <script src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/actions-1c75924ef950d7a3b7595bf8ea9850ba.js"></script>
  <script src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/tinycon-685ab96012d5442e9bd48420f8502d57.js"></script>
  <script src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/code_review-757d74dddf676d9217450a8ae6226b50.js"></script>
  <script src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/filters-f9e723d3653d9c9338529cb49a27df2d.js"></script>

    <meta content="authenticity_token" name="csrf-param">
<meta content="rB30I6OnSWEsGyiNfaeo8af16z0m/Gj2CMnKTHOt/Nw=" name="csrf-token">

  <link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABnElEQVQ4jZ2QsUsCcRTHf39C211TLh4N4V2dQ0MnLVEhQbQEDUVUQtDQlEQQDg0RLbUFWUN1ttXQEgTVooulFXpg6tUiSJFnJ2b6O74N2tWRGvjgOzze+374vkdIgzpgu/oDDK+qRFSTRBxttPen9tlOm8zwJwGWR4DloRJnTeKlQgRbU/MR6/DJDJ/7NlsBVaWI0xchQlvduL+NjQC1ND9n7bOdtnrG5oCqEkQQiMw4FlsFpEjPIpEZPtIqQCXOCClurkKT7KZKx37QRwVUeYA+N2aZ5QccMLIZFLwe5Ho5ZNodsAAKCxOohK6guTjok27Q+J0VHtgFVR5Q8HqgSXbkejkroLS3jeL6stkbT0nkh7qhSXboU26UL85QOtwxAZpktwI+T2UUlubMvhIO4n1iAJqLQyV0jfexvtYAxfVlfGytVVM2A3z4t1DcWPk54TmN/KCA8vU5qHIPGovCeMnCeE6bD7YA9PlxVMLB6hNnRkHvbyxPrJvAeMmCphPID4vmAk3EQWNR6NMj/wFeya3ThlYUFjveNImb/QIBvCFCIGyjLQAAAABJRU5ErkJggg==" rel="icon" type="image/x-icon"></head>
  <body>
    <div class="navbar navbar-inner navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <!-- Logo-->
      <a class="brand active" href="https://www.pullreview.com/" id="logo"><script pagespeed_no_defer="">//<![CDATA[
(function(){var g=this,h=function(b,d){var a=b.split("."),c=g;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)a.length||void 0===d?c[e]?c=c[e]:c=c[e]={}:c[e]=d};var l=function(b){var d=b.length;if(0<d){for(var a=Array(d),c=0;c<d;c++)a[c]=b[c];return a}return[]};var m=function(b){var d=window;if(d.addEventListener)d.addEventListener("load",b,!1);else if(d.attachEvent)d.attachEvent("onload",b);else{var a=d.onload;d.onload=function(){b.call(this);a&&a.call(this)}}};var n,p=function(b,d,a,c,e){this.f=b;this.h=d;this.i=a;this.c=e;this.e={height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};this.g=c;this.b={};this.a=[];this.d={}},q=function(b,d){var a,c,e=d.getAttribute("pagespeed_url_hash");if(a=e&&!(e in b.d))if(0>=d.offsetWidth&&0>=d.offsetHeight)a=!1;else{c=d.getBoundingClientRect();var f=document.body;a=c.top+("pageYOffset"in window?window.pageYOffset:(document.documentElement||f.parentNode||f).scrollTop);c=c.left+("pageXOffset"in window?window.pageXOffset:(document.documentElement||f.parentNode||f).scrollLeft);f=a.toString()+","+c;b.b.hasOwnProperty(f)?a=!1:(b.b[f]=!0,a=a<=b.e.height&&c<=b.e.width)}a&&(b.a.push(e),b.d[e]=!0)};p.prototype.checkImageForCriticality=function(b){b.getBoundingClientRect&&q(this,b)};h("pagespeed.CriticalImages.checkImageForCriticality",function(b){n.checkImageForCriticality(b)});h("pagespeed.CriticalImages.checkCriticalImages",function(){r(n)});var r=function(b){b.b={};for(var d=["IMG","INPUT"],a=[],c=0;c<d.length;++c)a=a.concat(l(document.getElementsByTagName(d[c])));if(0!=a.length&&a[0].getBoundingClientRect){for(c=0;d=a[c];++c)q(b,d);a="oh="+b.i;b.c&&(a+="&n="+b.c);if(d=0!=b.a.length)for(a+="&ci="+encodeURIComponent(b.a[0]),c=1;c<b.a.length;++c){var e=","+encodeURIComponent(b.a[c]);131072>=a.length+e.length&&(a+=e)}b.g&&(e="&rd="+encodeURIComponent(JSON.stringify(s())),131072>=a.length+e.length&&(a+=e),d=!0);t=a;if(d){c=b.f;b=b.h;var f;if(window.XMLHttpRequest)f=new XMLHttpRequest;else if(window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XMLHTTP")}catch(k){try{f=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){}}f&&(f.open("POST",c+(-1==c.indexOf("?")?"?":"&")+"url="+encodeURIComponent(b)),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(a))}}},s=function(){var b={},d=document.getElementsByTagName("IMG");if(0==d.length)return{};var a=d[0];if(!("naturalWidth"in a&&"naturalHeight"in a))return{};for(var c=0;a=d[c];++c){var e=a.getAttribute("pagespeed_url_hash");e&&(!(e in b)&&0<a.width&&0<a.height&&0<a.naturalWidth&&0<a.naturalHeight||e in b&&a.width>=b[e].k&&a.height>=b[e].j)&&(b[e]={rw:a.width,rh:a.height,ow:a.naturalWidth,oh:a.naturalHeight})}return b},t="";h("pagespeed.CriticalImages.getBeaconData",function(){return t});h("pagespeed.CriticalImages.Run",function(b,d,a,c,e,f){var k=new p(b,d,a,e,f);n=k;c&&m(function(){window.setTimeout(function(){r(k)},0)})});})();pagespeed.CriticalImages.Run('/mod_pagespeed_beacon','https://www.pullreview.com/github/matiasmasca/novedades/reviews/master','l8PuqRhht8',true,false,'Wdy2QF8X0UA');
//]]></script><img alt="PullReview" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/logo-f8cf3435c7b35196937586fbddf46a7e.png" pagespeed_url_hash="644509385" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a>

      <!-- User dropdown -->
      <nav id="main-menu" class="navbar-form pull-right">


            <ul class="nav user-nav">
              <li class="sort5">
                <form action="/users/auth/github">
                  <input class="btn" value="Log in" type="submit">
                </form>
              </li>
            </ul>

          <ul class="nav user-nav">
            <li class="sort3">
              <a title="Mail us at support@pullreview.com" href="https://www.pullreview.com/site/contact"><i class="fa fa-envelope-o"></i></a>
            </li>
          </ul>



      <ul class="nav user-nav"> <li><button id="toggle-tour-markers" class="badge badge-warning tooltip-btn"><i class="fa fa-lightbulb-o icon-lightbulb"></i></button></li> </ul></nav>

      <nav id="website-menu" class="pull-right">
          <ul class="nav user-nav">
            <li><a href="https://www.pullreview.com/"><i class="fa fa-home"></i></a></li>
            <li><a href="https://www.pullreview.com/site/plans">Pricing</a></li>
            <li><a href="https://www.pullreview.com/site/onboarding">Getting Started</a></li>
            <li><a href="http://docs.pullreview.com/">Docs</a></li>
            <li><a href="http://blog.8thcolor.com/" target="_blank">Blog</a></li>
          </ul>
        </nav>

    </div>
  </div>
</div>



    

    <div class="container">

      <!-- Alerts -->
  <div class="alert alert-info">
    <button type="button" class="close" data-dismiss="alert">×</button>
    <strong>
        <i class="fa fa-info-circle"></i> Just so you know …
    </strong>
    <p> Your are not authenticated, you have a restricted access. Feel free to login to get a better user experience.<br><strong>Free for open source projects.</strong> <a href="https://www.pullreview.com/site/plans">Sign up here</a> </p>
  </div>



        <div id="status_bar">
        </div>

      
<header id="overview" class="jumbotron subhead row">
  <!-- breadcrumb -->
<nav class="span12">
  <ul class="breadcrumb">
    <li>
      <a href="https://www.pullreview.com/">Home</a>
      <span class="divider">|</span>
    </li>

    <li>
        matiasmasca/novedades/master
    </li>
  </ul>
</nav>

<!-- Review header -->

<section id="title" class="span12">


  <div class="marker-wrapper"><div style="bottom: 0px; left: -26px;" class="tour-marker pointer-btn" data-tour="0"><span>0</span></div><h1 class="tour-target" data-tour="0">
    Review of branch master
    <a class="github_logo" href="https://github.com/matiasmasca/novedades/tree/master" target="_blank" title="Branch on GitHub"><i class="fa fa-github"></i></a>
  </h1></div>

  <section id="meta">
    aecf6c6725
    <span class="divider">|</span>


    the <time datetime="2016-02-21">
      21st February 2016
    </time>

    <span class="divider">|</span>
    <a href="https://www.pullreview.com/github/matiasmasca/novedades/movers/master">78 fixed issues</a>
        | 306 to go.
      &nbsp;&nbsp;<span class="divider">|</span>&nbsp;&nbsp;
      <a href="https://github.com/matiasmasca/novedades/tree/master" target="_blank" title="Branch on GitHub">View branch on GitHub <i class="fa fa-github"></i></a>
      &nbsp;&nbsp;


       <span class="divider">|</span>&nbsp;&nbsp;
           <a data-toggle="collapse" data-target="#view_badge_details">Badge urls</a><p></p>

    
  </section>

   <div class="collapse" id="view_badge_details">
    <form role="form">
     <div class="form-group">
      <label>Link</label>
      <input class="input-xxlarge" value="https://www.pullreview.com/github/matiasmasca/novedades/badges/master.svg?" type="text">
     </div>
     <div class="form-group">
      <label class="warning" title="Ready to paste in your readme.md or pullrequest description.
Add a `&amp;kind=full` to display more statistics."> Markdown</label>
      <input class="input-xxlarge" title="Ready to paste in your readme.md or pullrequest description.
Add a `&amp;kind=full` to display more statistics." value="[![PullReview stats](https://www.pullreview.com/github/matiasmasca/novedades/badges/master.svg?)](https://www.pullreview.com/github/matiasmasca/novedades/reviews/master)" type="text">
     </div>
    </form>
   </div>
</section>


</header>

  <p>This is a review of an <span class="review-marker">integration</span>
 branch. Instead of showing the difference between the given branch and 
the integration, we're showing here below all problems we found in the 
current codebase, so the list may be long.

  </p><p>This is a <span class="public-review-marker">public</span> 
review of a branch. It means that you can read it, even if you never 
contributed code to it. Be aware that we may hide some sensitive 
information regarding security issues.</p>


<section class="hotspots">
  <nav><h2><a data-toggle="collapse" data-target="#tagcloud">Hotspots <span class="caret"></span></a></h2></nav>
  <div id="tagcloud" class="collapse">
     <a style="font-size: 14pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=features/step_definitions/identificacion_steps.rb" rel="475.0" title="features/step_definitions/identificacion_steps.rb 
code_smell : 1
style : 15 ">identificacion_steps</a>
     <a style="font-size: 14.077pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb" rel="800" title="app/views/notifications/_form.html.erb 
design : 8 ">_form.html</a>
     <a style="font-size: 14.4085pt; color: rgb(204, 219, 236);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb" rel="2200" title="app/views/attachments/_show.html.erb 
design : 22 ">_show.html</a>
     <a style="font-size: 14.071pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=test/controllers/notifications_controller_test.rb" rel="775.0" title="test/controllers/notifications_controller_test.rb 
style : 7
documentation : 1 ">notifications_controller_test</a>
     <a style="font-size: 14.0426pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/helpers/application_helper.rb" rel="655.0" title="app/helpers/application_helper.rb 
style : 15
documentation : 4 ">application_helper</a>
     <a style="font-size: 14.0296pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb" rel="600" title="app/views/devise/_form.html.erb 
design : 6 ">_form.html</a>
     <a style="font-size: 21.2504pt; color: rgb(208, 192, 207);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/projects_controller.rb" rel="31095.0" title="app/controllers/projects_controller.rb 
style : 3
copy_paste : 3
documentation : 1 ">projects_controller</a>
     <a style="font-size: 25.2616pt; color: rgb(210, 177, 190);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb" rel="48035.0" title="app/controllers/users_controller.rb 
style : 7
copy_paste : 7 ">users_controller</a>
     <a style="font-size: 14.1717pt; color: rgb(204, 220, 237);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb" rel="1200" title="app/views/attachments/_form.html.erb 
design : 12 ">_form.html</a>
     <a style="font-size: 14.071pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=test/controllers/attachments_controller_test.rb" rel="775.0" title="test/controllers/attachments_controller_test.rb 
style : 7
documentation : 1 ">attachments_controller_test</a>
     <a style="font-size: 70pt; color: rgb(235, 0, 0);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb" rel="236975.0" title="app/controllers/attachments_controller.rb 
style : 7
security : 2
copy_paste : 4
documentation : 2 ">attachments_controller</a>
     <a style="font-size: 14.0059pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb" rel="500" title="app/views/projects/_form.html.erb 
design : 5 ">_form.html</a>
     <a style="font-size: 14.077pt; color: rgb(204, 221, 238);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=test/controllers/projects_controller_test.rb" rel="800.0" title="test/controllers/projects_controller_test.rb 
style : 8
documentation : 1 ">projects_controller_test</a>
     <a style="font-size: 16.6816pt; color: rgb(205, 210, 227);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb" rel="11800.0" title="app/views/notifications/show.html.erb 
design : 2
copy_paste : 2 ">show.html</a>
     <a style="font-size: 29.2964pt; color: rgb(212, 161, 173);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb" rel="65075.0" title="app/controllers/application_controller.rb 
code_smell : 1
complexity : 1
design : 7
style : 19
copy_paste : 2
documentation : 1 ">application_controller</a>
     <a style="font-size: 15.7581pt; color: rgb(205, 214, 231);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb" rel="7900.0" title="app/views/attachments/index.html.erb 
design : 3
copy_paste : 1 ">index.html</a>
     <a style="font-size: 21.7607pt; color: rgb(208, 190, 205);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/admin/users_controller.rb" rel="33250.0" title="app/controllers/admin/users_controller.rb 
style : 6
copy_paste : 3
documentation : 1 ">users_controller</a>
     <a style="font-size: 14.8347pt; color: rgb(204, 218, 234);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/index.html.erb" rel="4000.0" title="app/views/projects/index.html.erb 
copy_paste : 1 ">index.html</a>
     <a style="font-size: 15.4503pt; color: rgb(205, 215, 232);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb" rel="6600.0" title="app/views/pages/index.html.erb 
design : 2
copy_paste : 2 ">index.html</a>
     <a style="font-size: 44.2317pt; color: rgb(221, 102, 110);" href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/notifications_controller.rb" rel="128150.0" title="app/controllers/notifications_controller.rb 
style : 6
security : 1
copy_paste : 3
documentation : 2 ">notifications_controller</a>
  </div>
</section>


<div class="marker-wrapper"><div style="bottom: 0px; left: -26px;" class="tour-marker pointer-btn" data-tour="1"><span>1</span></div><header data-tour="1" id="head" class="actions-header tour-target" data-violations="104">

              <div class="btn-group sort">
                <button id="category_button" class="btn btn-sort">All categories (104)</button>
                <button class="btn btn-sort dropdown-toggle" data-toggle="dropdown" id="sort1" title="Filter by category">
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="sort1">
                  <li><a id="all_categories" data-filter-all="all_filter" tabindex="-1" href="#">All categories (104)</a></li>
                    <li><a data-filter-category="code_smell" tabindex="-1" href="#">Code smell (2)</a></li>
                    <li><a data-filter-category="copy_paste" tabindex="-1" href="#">Duplication (28)</a></li>
                    <li><a data-filter-category="security" tabindex="-1" href="#">Security (0)</a></li>
                    <li><a data-filter-category="complexity" tabindex="-1" href="#">Complexity (1)</a></li>
                    <li><a data-filter-category="design" tabindex="-1" href="#">Design (72)</a></li>
                    <li><a data-filter-category="style" tabindex="-1" href="#">Style (1)</a></li>
                    <li><a data-filter-category="documentation" tabindex="-1" href="#">Documentation (0)</a></li>
                    <li><a data-filter-category="test_infection" tabindex="-1" href="#">Test Infection (0)</a></li>
                </ul>
              </div>

              <div class="btn-group sort2">
                <button id="severity_button" class="btn btn-sort">All severities (104)</button>
                <button class="btn btn-sort dropdown-toggle" data-toggle="dropdown" id="sort2" title="Filter by severity">
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="sort2">
                  <li><a id="all_severities" data-filter-all="all_filter" tabindex="-1" href="#">All severities (104)</a></li>
                    <li><a data-filter-severity="quick_win" tabindex="-1" href="#">Quick win (1)</a></li>
                    <li><a data-filter-severity="critical" tabindex="-1" href="#">Critical (7)</a></li>
                    <li><a data-filter-severity="major" tabindex="-1" href="#">Major (91)</a></li>
                    <li><a data-filter-severity="minor" tabindex="-1" href="#">Minor (4)</a></li>
                    <li><a data-filter-severity="info" tabindex="-1" href="#">Info (1)</a></li>
                </ul>
              </div>



            </header></div>


<section class="content">

   <!-- Actions -->

    <section class="section-quick-win row">
    <article class="accordion action span12" id="accordion15550293" data-category="code_smell" data-severity="quick_win" data-language="ruby" data-size="1">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret quick_win open-badge " data-toggle="collapse" data-target="#collapse15550293" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550293">
            <img alt="code_smell" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/code_smell-be5b65e8b093ccd871652e14886d2837.png" title="Code smell" pagespeed_url_hash="1513149161" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion0" href="#collapse15550293">
          <h3>
            Always define an else in case statement.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L62">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L62">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L62" target="_blank">is_owner <i class="fa fa-github"></i></a>
      

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550293" class="accordion-body  collapse ">
    <div class="accordion-inner">

    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L62">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L62">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L62" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n60" name="n60">60</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n62" name="n62">62</a></strong></span>    <span class="keyword">case</span> params[<span class="symbol">:controller</span>]
<span class="line-numbers"><a href="#n63" name="n63">63</a></span>       <span class="keyword">when</span> <span class="string"><span class="delimiter">"</span><span class="content">projects</span><span class="delimiter">"</span></span>
<span class="line-numbers"><a href="#n64" name="n64">64</a></span>         <span class="keyword">if</span> params[<span class="symbol">:id</span>]
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>           project = <span class="constant">Project</span>.find_by_id(params[<span class="symbol">:id</span>])
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>This check reports <code class="prettyprint">case</code> statements that don't have an <code class="prettyprint">else</code> clause that would
be executed when no cases match. If the tested value will never adopt any other
values than the ones tested for in the cases, this should be expressed in the
code by throwing an exception in the <code class="prettyprint">else</code> clause.</p>

<p>Check that case statements have an else statement so that all cases are covered.</p>
<div class="CodeRay">
  <div class="code"><pre><span class="keyword">case</span> foo
  <span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">bar</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">ok</span><span class="delimiter">'</span></span>
  <span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">bad</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>What happens when <code class="prettyprint">foo</code> is equal to <code class="prettyprint">'biz'</code>?</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <h3>Add an else clause and throw an exception</h3>
<div class="CodeRay">
  <div class="code"><pre><span class="keyword">case</span> foo
<span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">bar</span><span class="delimiter">'</span></span>:
    <span class="string"><span class="delimiter">'</span><span class="content">ok</span><span class="delimiter">'</span></span>
<span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>:
    <span class="string"><span class="delimiter">'</span><span class="content">bad</span><span class="delimiter">'</span></span>
<span class="keyword">else</span>
    raise <span class="string"><span class="delimiter">"</span><span class="content">unsupported value : '</span><span class="inline"><span class="inline-delimiter">#{</span>foo<span class="inline-delimiter">}</span></span><span class="content">'</span><span class="delimiter">"</span></span>
<span class="keyword">end</span>
</pre></div>
</div>

<h3>Or define a default case</h3>
<div class="CodeRay">
  <div class="code"><pre><span class="keyword">case</span> foo
<span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">bar</span><span class="delimiter">'</span></span>:
    <span class="string"><span class="delimiter">'</span><span class="content">ok</span><span class="delimiter">'</span></span>
<span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>:
    <span class="string"><span class="delimiter">'</span><span class="content">not too bad</span><span class="delimiter">'</span></span>
<span class="keyword">else</span>
    <span class="string"><span class="delimiter">'</span><span class="content">really bad</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>
</pre></div>
</div>

      </section>

      <section class="references">
        <h4>More info</h4>
          <p><a href="http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/" title="" target="_blank">How Ruby's switch works behind the hood. <i class="fa fa-external-link"></i></a></p>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Always%20define%20an%20else%20in%20case%20statement.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="http://simplabs.com/" title="" target="_blank">Marco Otte-Witte's <i class="fa fa-external-link"></i></a> work on <a href="http://simplabs.com/excellent/" title="" target="_blank">Excellent <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/simplabs/excellent/blob/master/MIT-LICENSE" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

  </section>




<div id="more-violations-2" data-url="/github/matiasmasca/novedades/reviews/master?page=2">  <!-- Actions -->

    <section class="section-critical row">
    <article class="accordion action span12" id="accordion15550294" data-category="complexity" data-severity="critical" data-language="ruby" data-size="1">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret critical open-badge " data-toggle="collapse" data-target="#collapse15550294" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550294">
            <script pagespeed_no_defer="">//<![CDATA[
(function(){var g=this,h=function(b,d){var a=b.split("."),c=g;a[0]in 
c||!c.execScript||c.execScript("var "+a[0]);for(var 
e;a.length&&(e=a.shift());)a.length||void 
0===d?c[e]?c=c[e]:c=c[e]={}:c[e]=d};var l=function(b){var 
d=b.length;if(0<d){for(var a=Array(d),c=0;c<d;c++)a[c]=b[c];return 
a}return[]};var m=function(b){var 
d=window;if(d.addEventListener)d.addEventListener("load",b,!1);else 
if(d.attachEvent)d.attachEvent("onload",b);else{var 
a=d.onload;d.onload=function(){b.call(this);a&&a.call(this)}}};var 
n,p=function(b,d,a,c,e){this.f=b;this.h=d;this.i=a;this.c=e;this.e={height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};this.g=c;this.b={};this.a=[];this.d={}},q=function(b,d){var
 a,c,e=d.getAttribute("pagespeed_url_hash");if(a=e&&!(e in 
b.d))if(0>=d.offsetWidth&&0>=d.offsetHeight)a=!1;else{c=d.getBoundingClientRect();var
 f=document.body;a=c.top+("pageYOffset"in 
window?window.pageYOffset:(document.documentElement||f.parentNode||f).scrollTop);c=c.left+("pageXOffset"in
 
window?window.pageXOffset:(document.documentElement||f.parentNode||f).scrollLeft);f=a.toString()+","+c;b.b.hasOwnProperty(f)?a=!1:(b.b[f]=!0,a=a<=b.e.height&&c<=b.e.width)}a&&(b.a.push(e),b.d[e]=!0)};p.prototype.checkImageForCriticality=function(b){b.getBoundingClientRect&&q(this,b)};h("pagespeed.CriticalImages.checkImageForCriticality",function(b){n.checkImageForCriticality(b)});h("pagespeed.CriticalImages.checkCriticalImages",function(){r(n)});var
 r=function(b){b.b={};for(var 
d=["IMG","INPUT"],a=[],c=0;c<d.length;++c)a=a.concat(l(document.getElementsByTagName(d[c])));if(0!=a.length&&a[0].getBoundingClientRect){for(c=0;d=a[c];++c)q(b,d);a="oh="+b.i;b.c&&(a+="&n="+b.c);if(d=0!=b.a.length)for(a+="&ci="+encodeURIComponent(b.a[0]),c=1;c<b.a.length;++c){var
 
e=","+encodeURIComponent(b.a[c]);131072>=a.length+e.length&&(a+=e)}b.g&&(e="&rd="+encodeURIComponent(JSON.stringify(s())),131072>=a.length+e.length&&(a+=e),d=!0);t=a;if(d){c=b.f;b=b.h;var
 f;if(window.XMLHttpRequest)f=new XMLHttpRequest;else 
if(window.ActiveXObject)try{f=new 
ActiveXObject("Msxml2.XMLHTTP")}catch(k){try{f=new 
ActiveXObject("Microsoft.XMLHTTP")}catch(u){}}f&&(f.open("POST",c+(-1==c.indexOf("?")?"?":"&")+"url="+encodeURIComponent(b)),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(a))}}},s=function(){var
 b={},d=document.getElementsByTagName("IMG");if(0==d.length)return{};var
 a=d[0];if(!("naturalWidth"in a&&"naturalHeight"in a))return{};for(var 
c=0;a=d[c];++c){var e=a.getAttribute("pagespeed_url_hash");e&&(!(e in 
b)&&0<a.width&&0<a.height&&0<a.naturalWidth&&0<a.naturalHeight||e in 
b&&a.width>=b[e].k&&a.height>=b[e].j)&&(b[e]={rw:a.width,rh:a.height,ow:a.naturalWidth,oh:a.naturalHeight})}return
 b},t="";h("pagespeed.CriticalImages.getBeaconData",function(){return 
t});h("pagespeed.CriticalImages.Run",function(b,d,a,c,e,f){var k=new 
p(b,d,a,e,f);n=k;c&&m(function(){window.setTimeout(function(){r(k)},0)})});})();pagespeed.CriticalImages.Run('/mod_pagespeed_beacon','https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?page=2&_=1461375384544','l8PuqRhht8',true,false,'mhvHw_xVl1c');
//]]></script><img alt="complexity" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/complexity-c6efdf47ed22982f7137bfc3a8dc222a.png" title="Complexity" pagespeed_url_hash="1022814669" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion0" href="#collapse15550294">
          <h3>
            Consider refactoring this complex method.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550294" class="accordion-body  collapse ">
    <div class="accordion-inner">

    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><strong class="highlighted"><a href="#n51" name="n51">51</a></strong></span>  <span class="keyword">def</span> <span class="function">is_owner</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>    <span class="keyword">return</span> <span class="predefined-constant">false</span> <span class="keyword">unless</span> current_user
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>    <span class="comment"># logger.info(current_user.is_admin?)</span>
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>    <span class="keyword">return</span> <span class="predefined-constant">true</span> <span class="keyword">if</span> current_user.is_admin?
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>    <span class="keyword">if</span> current_user.tipo.nil?
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>      security_exit
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>      <span class="keyword">return</span> <span class="predefined-constant">false</span>
<span class="line-numbers"><a href="#n60" name="n60">60</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>
<span class="line-numbers"><a href="#n62" name="n62">62</a></span>    <span class="keyword">case</span> params[<span class="symbol">:controller</span>]
<span class="line-numbers"><a href="#n63" name="n63">63</a></span>       <span class="keyword">when</span> <span class="string"><span class="delimiter">"</span><span class="content">projects</span><span class="delimiter">"</span></span>
<span class="line-numbers"><a href="#n64" name="n64">64</a></span>         <span class="keyword">if</span> params[<span class="symbol">:id</span>]
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>           project = <span class="constant">Project</span>.find_by_id(params[<span class="symbol">:id</span>])
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>           project = <span class="constant">Project</span>.find_by_user_id(current_user.id) <span class="keyword">unless</span> current_user.is_admin?
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>         <span class="keyword">if</span> project &amp;&amp; project.user.id == current_user.id &amp;&amp; !current_user.is_admin?
<span class="line-numbers"><a href="#n70" name="n70">70</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>           security_exit
<span class="line-numbers"><a href="#n73" name="n73">73</a></span>           <span class="keyword">return</span> <span class="predefined-constant">false</span>
<span class="line-numbers"><a href="#n74" name="n74">74</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><a href="#n75" name="n75">75</a></span>       <span class="keyword">when</span> <span class="string"><span class="delimiter">"</span><span class="content">notifications</span><span class="delimiter">"</span></span>
<span class="line-numbers"><a href="#n76" name="n76">76</a></span>         notification = <span class="constant">Notification</span>.find_by_id(params[<span class="symbol">:id</span>]) <span class="keyword">if</span> params[<span class="symbol">:id</span>]
<span class="line-numbers"><a href="#n77" name="n77">77</a></span>         <span class="keyword">if</span> params[<span class="symbol">:action</span>] == <span class="string"><span class="delimiter">"</span><span class="content">index</span><span class="delimiter">"</span></span>
<span class="line-numbers"><a href="#n78" name="n78">78</a></span>           project = <span class="constant">Project</span>.find_by_id(params[<span class="symbol">:project_id</span>])
<span class="line-numbers"><a href="#n79" name="n79">79</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span> <span class="keyword">if</span> project.user.id == current_user.id &amp;&amp; !current_user.is_admin?
<span class="line-numbers"><a href="#n80" name="n80">80</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><a href="#n81" name="n81">81</a></span>         <span class="keyword">if</span> notification &amp;&amp; notification.project.user.id == current_user.id
<span class="line-numbers"><a href="#n82" name="n82">82</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n83" name="n83">83</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n84" name="n84">84</a></span>           security_exit
<span class="line-numbers"><a href="#n85" name="n85">85</a></span>           <span class="keyword">return</span> <span class="predefined-constant">false</span>
<span class="line-numbers"><a href="#n86" name="n86">86</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><a href="#n87" name="n87">87</a></span>       <span class="keyword">when</span> <span class="string"><span class="delimiter">"</span><span class="content">attachments</span><span class="delimiter">"</span></span>
<span class="line-numbers"><a href="#n88" name="n88">88</a></span>         notification = <span class="constant">Notification</span>.find_by_id(params[<span class="symbol">:notification_id</span>]) <span class="keyword">if</span> params[<span class="symbol">:notification_id</span>]
<span class="line-numbers"><a href="#n89" name="n89">89</a></span>         notification = <span class="constant">Attachment</span>.find_by_id(params[<span class="symbol">:id</span>]).notification <span class="keyword">if</span> params[<span class="symbol">:id</span>]
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>This test reports methods with a <a href="http://ruby.sadi.st/Flog.html" title="" target="_blank">Flog <i class="fa fa-external-link"></i></a> metric
score that is higher than the threshold. The Flog metric is very similar to the
<a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity" title="" target="_blank">cyclomatic complexity <i class="fa fa-external-link"></i></a>
metric but also takes Ruby-specific statements into account. For example, calls
to meta-programming methods such as <code class="prettyprint">define_method</code> or <code class="prettyprint">class_eval</code> are weighted
higher than regular method calls.</p>

<p>Methods have a very large number of possible paths. This is bad because the
behaviour of code with lots of branches or evals is difficult to understand and
test and can also be an important source of errors.</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Complexity can be reduced in several ways:</p>

<h3>By splitting responsibilities</h3>

<p>The method may be doing too many different things. A clear indication of that is
code like this:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="keyword">class</span> <span class="class">Rocket</span>
  <span class="keyword">def</span> <span class="function">launch</span>
    <span class="comment"># fire the propellant</span>
    <span class="comment"># (lots of code)</span>

    <span class="comment"># ignite the afterburners</span>
    <span class="comment"># (still more code)</span>

    <span class="comment"># remote tower control</span>
    <span class="comment"># (even more code)</span>
  <span class="keyword">end</span>
</pre></div>
</div>

<p>Comments such as these are good indicators that each of them should probably be
a method in itself.  Shorter methods with more dedicated roles are easier to
test and understand, even if they are private and not reused (yet).</p>

<h3>By reducing the usage of meta-programming</h3>

<p>Ruby has a lot of dynamic options like <code class="prettyprint">eval</code>, <code class="prettyprint">method_missing</code> and <code class="prettyprint">send</code>.
Whilst very powerful, they also make the code more complex, especially for
fellow programmers. Try to use them less whenever possible - straightforward
code is a boon to all maintainers.</p>

<h3>By reducing branching</h3>

<p>A method with a lot of <code class="prettyprint">if</code> or <code class="prettyprint">switch</code> can sometimes be simplified by proper
usage of <code class="prettyprint">Exception</code> (instead of <code class="prettyprint">if</code> guard clauses), polymorphism (instead of
<code class="prettyprint">switch</code> statements) or lambdas (that can be used as dedicated code snippets to
be applied depending on conditions).</p>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/did-you-say-complexity-eh/" title="" target="_blank">Complexity <i class="fa fa-external-link"></i></a></li>
<li><a href="http://sourcemaking.com/refactoring/replace-conditional-with-polymorphism" title="" target="_blank">Replacing conditionals with polymorphism <i class="fa fa-external-link"></i></a></li>
<li><a href="http://robots.thoughtbot.com/post/8181879506/if-you-gaze-into-nil-nil-gazes-also-into-you" title="" target="_blank">Use Exceptions instead of guard clauses <i class="fa fa-external-link"></i></a></li>
<li><a href="http://blog.thecodewhisperer.com/2013/01/31/modularity-details-pick-one/" title="" target="_blank">Modularity. Details. Pick one. <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
<li><a href="http://erniemiller.org/2013/09/16/the-cost-of-if/" title="" target="_blank">The cost of if <i class="fa fa-external-link"></i></a></li>
<li>Quote from <a href="https://twitter.com/sandimetz/status/522037579160780800" title="" target="_blank">Sandi Metz <i class="fa fa-external-link"></i></a>
 : "Complexity is only justified if it results in higher levels of 
abstraction that reduce duplication and increase reusability."</li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%20this%20complex%20method.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="http://simplabs.com/" title="" target="_blank">Marco Otte-Witte's <i class="fa fa-external-link"></i></a> work on <a href="http://simplabs.com/excellent/" title="" target="_blank">Excellent <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/simplabs/excellent/blob/master/MIT-LICENSE" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550295" data-category="copy_paste" data-severity="critical" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret critical open-badge " data-toggle="collapse" data-target="#collapse15550295" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550295">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapse15550295">
          <h3>
            Avoid copy/paste.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:64
app/controllers/users_controller.rb:82&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550295" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/admin/users_controller.rb:64
app/controllers/users_controller.rb:82</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:64
app/controllers/users_controller.rb:82&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/admin/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L82">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L82">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L82" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:64
app/controllers/users_controller.rb:82&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L64" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:64
app/controllers/users_controller.rb:82&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/admin/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n64" name="n64">64</a></span>  <span class="keyword">def</span> <span class="function">destroy</span>
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>    <span class="instance-variable">@user</span>.destroy
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>      format.html { redirect_to <span class="symbol">:back</span> , <span class="key">status</span>: <span class="integer">303</span> , <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Usuario borrado correctamente.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>      <span class="comment"># format.html { redirect_to users_url, notice: 'Usuario borrado correctamente.' }</span>
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>      format.json { head <span class="symbol">:no_content</span> }
<span class="line-numbers"><a href="#n70" name="n70">70</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>
<span class="line-numbers"><a href="#n73" name="n73">73</a></span>  private
<span class="line-numbers"><a href="#n74" name="n74">74</a></span>    <span class="comment"># Use callbacks to share common setup or constraints between actions.</span>
<span class="line-numbers"><a href="#n75" name="n75">75</a></span>    <span class="keyword">def</span> <span class="function">set_user</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L82">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L82">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L82" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:64
app/controllers/users_controller.rb:82&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n82" name="n82">82</a></span>  <span class="keyword">def</span> <span class="function">destroy</span>
<span class="line-numbers"><a href="#n83" name="n83">83</a></span>    <span class="instance-variable">@user</span>.destroy
<span class="line-numbers"><a href="#n84" name="n84">84</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n85" name="n85">85</a></span>      format.html { redirect_to <span class="symbol">:back</span> , <span class="key">status</span>: <span class="integer">303</span> , <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Usuario borrado correctamente.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n86" name="n86">86</a></span>      <span class="comment"># format.html { redirect_to users_url, notice: 'Usuario borrado correctamente.' }</span>
<span class="line-numbers"><a href="#n87" name="n87">87</a></span>      format.json { head <span class="symbol">:no_content</span> }
<span class="line-numbers"><a href="#n88" name="n88">88</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n89" name="n89">89</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n90" name="n90">90</a></span>
<span class="line-numbers"><a href="#n91" name="n91">91</a></span>  private
<span class="line-numbers"><a href="#n92" name="n92">92</a></span>    <span class="comment"># Use callbacks to share common setup or constraints between actions.</span>
<span class="line-numbers"><a href="#n93" name="n93">93</a></span>    <span class="keyword">def</span> <span class="function">set_user</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>Code reuse is a standard practice in modern software development. The downside
of code reuse via replication and copy-paste programming is that it leads to
code bloat, increasing the technical depth of software products and making
maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactorings are available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Avoid%20copy%2Fpaste.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550296" data-category="copy_paste" data-severity="critical" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret critical open-badge " data-toggle="collapse" data-target="#collapse15550296" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550296">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse15550296">
          <h3>
            Avoid copy/paste.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L31" target="_blank" title="&lt;pre&gt;app/views/attachments/index.html.erb:31
app/views/notifications/show.html.erb:49&lt;/pre&gt;">app/views/attachments/index.html.erb:31 <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550296" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/views/attachments/index.html.erb:31
app/views/notifications/show.html.erb:49</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L31" target="_blank" title="&lt;pre&gt;app/views/attachments/index.html.erb:31
app/views/notifications/show.html.erb:49&lt;/pre&gt;">app/views/attachments/index.html.erb:31 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L49" target="_blank" title="&lt;pre&gt;app/views/attachments/index.html.erb:31
app/views/notifications/show.html.erb:49&lt;/pre&gt;">app/views/notifications/show.html.erb:49 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L31" target="_blank" title="&lt;pre&gt;app/views/attachments/index.html.erb:31
app/views/notifications/show.html.erb:49&lt;/pre&gt;">app/views/attachments/index.html.erb:31 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n31" name="n31">31</a></span>          <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content"> Eliminar</span><span class="delimiter">'</span></span>, attachment, <span class="key">class</span>:<span class="string"><span class="delimiter">"</span><span class="content">btn btn-danger fa fa-trash-o</span><span class="delimiter">"</span></span>, <span class="key">method</span>: <span class="symbol">:delete</span>, <span class="key">data</span>: { <span class="key">confirm</span>: <span class="string"><span class="delimiter">"</span><span class="content">¿Esta seguro que desea borrar este archivo? </span><span class="char">\n</span><span class="delimiter">"</span></span> + attachment.title + <span class="string"><span class="delimiter">"</span><span class="delimiter">"</span></span>} <span class="keyword">if</span> current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>        <span class="tag">&lt;/tr&gt;</span>
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>    <span class="tag">&lt;/tbody&gt;</span>
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>  <span class="tag">&lt;/table&gt;</span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span><span class="tag">&lt;br&gt;</span>
<span class="line-numbers"><a href="#n37" name="n37">37</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Volver</span><span class="delimiter">'</span></span>, <span class="symbol">:back</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-default</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n38" name="n38">38</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Volver a novedad</span><span class="delimiter">'</span></span>, notification_path(params[<span class="symbol">:notification_id</span>]), <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-default</span><span class="delimiter">"</span></span> <span class="keyword">if</span> current_user.is_admin? &amp;&amp; params[<span class="symbol">:notification_id</span>]<span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>
<span class="line-numbers"><a href="#n40" name="n40">40</a></span><span class="tag">&lt;/div&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L49" target="_blank" title="&lt;pre&gt;app/views/attachments/index.html.erb:31
app/views/notifications/show.html.erb:49&lt;/pre&gt;">app/views/notifications/show.html.erb:49 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n49" name="n49">49</a></span>            <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content"> Eliminar</span><span class="delimiter">'</span></span>, attachment, <span class="key">class</span>:<span class="string"><span class="delimiter">"</span><span class="content">btn btn-danger fa fa-trash-o</span><span class="delimiter">"</span></span>, <span class="key">method</span>: <span class="symbol">:delete</span>, <span class="key">data</span>: { <span class="key">confirm</span>: <span class="string"><span class="delimiter">"</span><span class="content">¿Esta seguro que desea borrar este archivo? </span><span class="char">\n</span><span class="delimiter">"</span></span> + attachment.title + <span class="string"><span class="delimiter">"</span><span class="delimiter">"</span></span>}  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n50" name="n50">50</a></span>          <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>         <span class="tag">&lt;/td&gt;</span>
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>        <span class="tag">&lt;/tr&gt;</span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>        <span class="comment">&lt;!-- Collapsed --&gt;</span>
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>        <span class="tag">&lt;tr&gt;</span>
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>          <span class="tag">&lt;td</span> <span class="attribute-name">colspan</span>=<span class="string"><span class="delimiter">"</span><span class="content">4</span><span class="delimiter">"</span></span> <span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>            <span class="tag">&lt;div</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">height</span>: <span class="float">0px</span>;<span class="delimiter">"</span></span> <span class="attribute-name">aria-expanded</span>=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">collapse</span><span class="delimiter">"</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">collapse-</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> attachment.id <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>              <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">well</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>                <span class="comment">&lt;!--/show attach --&gt;</span>
<span class="line-numbers"><a href="#n60" name="n60">60</a></span>                  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@attachment</span> = attachment <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>Code reuse is a standard practice in modern software development. The downside
of code reuse via replication and copy-paste programming is that it leads to
code bloat, increasing the technical depth of software products and making
maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactorings are available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Avoid%20copy%2Fpaste.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550297" data-category="copy_paste" data-severity="critical" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret critical open-badge " data-toggle="collapse" data-target="#collapse15550297" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550297">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapse15550297">
          <h3>
            Avoid copy/paste.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82" target="_blank" title="&lt;pre&gt;app/controllers/application_controller.rb:82
app/controllers/application_controller.rb:91&lt;/pre&gt;">is_owner <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550297" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/application_controller.rb:82
app/controllers/application_controller.rb:91</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82" target="_blank" title="&lt;pre&gt;app/controllers/application_controller.rb:82
app/controllers/application_controller.rb:91&lt;/pre&gt;">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L91" target="_blank" title="&lt;pre&gt;app/controllers/application_controller.rb:82
app/controllers/application_controller.rb:91&lt;/pre&gt;">app/controllers/application_controller.rb:91 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L82" target="_blank" title="&lt;pre&gt;app/controllers/application_controller.rb:82
app/controllers/application_controller.rb:91&lt;/pre&gt;">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n82" name="n82">82</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n83" name="n83">83</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n84" name="n84">84</a></span>           security_exit
<span class="line-numbers"><a href="#n85" name="n85">85</a></span>           <span class="keyword">return</span> <span class="predefined-constant">false</span>
<span class="line-numbers"><a href="#n86" name="n86">86</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><a href="#n87" name="n87">87</a></span>       <span class="keyword">when</span> <span class="string"><span class="delimiter">"</span><span class="content">attachments</span><span class="delimiter">"</span></span>
<span class="line-numbers"><a href="#n88" name="n88">88</a></span>         notification = <span class="constant">Notification</span>.find_by_id(params[<span class="symbol">:notification_id</span>]) <span class="keyword">if</span> params[<span class="symbol">:notification_id</span>]
<span class="line-numbers"><a href="#n89" name="n89">89</a></span>         notification = <span class="constant">Attachment</span>.find_by_id(params[<span class="symbol">:id</span>]).notification <span class="keyword">if</span> params[<span class="symbol">:id</span>]
<span class="line-numbers"><a href="#n90" name="n90">90</a></span>         <span class="keyword">if</span> notification &amp;&amp; notification.project.user.id == current_user.id
<span class="line-numbers"><a href="#n91" name="n91">91</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n92" name="n92">92</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n93" name="n93">93</a></span>           security_exit
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L91" target="_blank" title="&lt;pre&gt;app/controllers/application_controller.rb:82
app/controllers/application_controller.rb:91&lt;/pre&gt;">app/controllers/application_controller.rb:91 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n91" name="n91">91</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"> <a href="#n92" name="n92">92</a></span>         <span class="keyword">else</span>
<span class="line-numbers"> <a href="#n93" name="n93">93</a></span>           security_exit
<span class="line-numbers"> <a href="#n94" name="n94">94</a></span>           <span class="keyword">return</span> <span class="predefined-constant">false</span>
<span class="line-numbers"> <a href="#n95" name="n95">95</a></span>         <span class="keyword">end</span>
<span class="line-numbers"> <a href="#n96" name="n96">96</a></span>       <span class="keyword">else</span>
<span class="line-numbers"> <a href="#n97" name="n97">97</a></span>         <span class="comment">#default case</span>
<span class="line-numbers"> <a href="#n98" name="n98">98</a></span>   <span class="keyword">end</span>
<span class="line-numbers"> <a href="#n99" name="n99">99</a></span>
<span class="line-numbers"><a href="#n100" name="n100">100</a></span>   <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n101" name="n101">101</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n102" name="n102">102</a></span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>Code reuse is a standard practice in modern software development. The downside
of code reuse via replication and copy-paste programming is that it leads to
code bloat, increasing the technical depth of software products and making
maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactorings are available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Avoid%20copy%2Fpaste.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

  </section>

<div id="more-violations-3" data-url="/github/matiasmasca/novedades/reviews/master?page=3">  <!-- Actions -->

    <section class="section-major row">
    <article class="accordion action span12" id="accordion15550301" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="3">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550301" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550301">
            <script pagespeed_no_defer="">//<![CDATA[
(function(){var g=this,h=function(b,d){var a=b.split("."),c=g;a[0]in 
c||!c.execScript||c.execScript("var "+a[0]);for(var 
e;a.length&&(e=a.shift());)a.length||void 
0===d?c[e]?c=c[e]:c=c[e]={}:c[e]=d};var l=function(b){var 
d=b.length;if(0<d){for(var a=Array(d),c=0;c<d;c++)a[c]=b[c];return 
a}return[]};var m=function(b){var 
d=window;if(d.addEventListener)d.addEventListener("load",b,!1);else 
if(d.attachEvent)d.attachEvent("onload",b);else{var 
a=d.onload;d.onload=function(){b.call(this);a&&a.call(this)}}};var 
n,p=function(b,d,a,c,e){this.f=b;this.h=d;this.i=a;this.c=e;this.e={height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};this.g=c;this.b={};this.a=[];this.d={}},q=function(b,d){var
 a,c,e=d.getAttribute("pagespeed_url_hash");if(a=e&&!(e in 
b.d))if(0>=d.offsetWidth&&0>=d.offsetHeight)a=!1;else{c=d.getBoundingClientRect();var
 f=document.body;a=c.top+("pageYOffset"in 
window?window.pageYOffset:(document.documentElement||f.parentNode||f).scrollTop);c=c.left+("pageXOffset"in
 
window?window.pageXOffset:(document.documentElement||f.parentNode||f).scrollLeft);f=a.toString()+","+c;b.b.hasOwnProperty(f)?a=!1:(b.b[f]=!0,a=a<=b.e.height&&c<=b.e.width)}a&&(b.a.push(e),b.d[e]=!0)};p.prototype.checkImageForCriticality=function(b){b.getBoundingClientRect&&q(this,b)};h("pagespeed.CriticalImages.checkImageForCriticality",function(b){n.checkImageForCriticality(b)});h("pagespeed.CriticalImages.checkCriticalImages",function(){r(n)});var
 r=function(b){b.b={};for(var 
d=["IMG","INPUT"],a=[],c=0;c<d.length;++c)a=a.concat(l(document.getElementsByTagName(d[c])));if(0!=a.length&&a[0].getBoundingClientRect){for(c=0;d=a[c];++c)q(b,d);a="oh="+b.i;b.c&&(a+="&n="+b.c);if(d=0!=b.a.length)for(a+="&ci="+encodeURIComponent(b.a[0]),c=1;c<b.a.length;++c){var
 
e=","+encodeURIComponent(b.a[c]);131072>=a.length+e.length&&(a+=e)}b.g&&(e="&rd="+encodeURIComponent(JSON.stringify(s())),131072>=a.length+e.length&&(a+=e),d=!0);t=a;if(d){c=b.f;b=b.h;var
 f;if(window.XMLHttpRequest)f=new XMLHttpRequest;else 
if(window.ActiveXObject)try{f=new 
ActiveXObject("Msxml2.XMLHTTP")}catch(k){try{f=new 
ActiveXObject("Microsoft.XMLHTTP")}catch(u){}}f&&(f.open("POST",c+(-1==c.indexOf("?")?"?":"&")+"url="+encodeURIComponent(b)),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(a))}}},s=function(){var
 b={},d=document.getElementsByTagName("IMG");if(0==d.length)return{};var
 a=d[0];if(!("naturalWidth"in a&&"naturalHeight"in a))return{};for(var 
c=0;a=d[c];++c){var e=a.getAttribute("pagespeed_url_hash");e&&(!(e in 
b)&&0<a.width&&0<a.height&&0<a.naturalWidth&&0<a.naturalHeight||e in 
b&&a.width>=b[e].k&&a.height>=b[e].j)&&(b[e]={rw:a.width,rh:a.height,ow:a.naturalWidth,oh:a.naturalHeight})}return
 b},t="";h("pagespeed.CriticalImages.getBeaconData",function(){return 
t});h("pagespeed.CriticalImages.Run",function(b,d,a,c,e,f){var k=new 
p(b,d,a,e,f);n=k;c&&m(function(){window.setTimeout(function(){r(k)},0)})});})();pagespeed.CriticalImages.Run('/mod_pagespeed_beacon','https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?page=3&_=1461375384545','l8PuqRhht8',true,false,'wh8lNIvmQWo');
//]]></script><img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion0" href="#collapse15550301">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
       and 2 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550301" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/projects_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L50">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L50">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L50" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L61">NotificationsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L61">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L61" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/notifications_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L49" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/projects_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n49" name="n49">49</a></span>  <span class="keyword">def</span> <span class="function">update</span>
<span class="line-numbers"><a href="#n50" name="n50">50</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>      <span class="keyword">if</span> <span class="instance-variable">@project</span>.update(project_params)
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>        format.html { redirect_to <span class="instance-variable">@project</span>, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Project was successfully updated.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>        format.json { render <span class="symbol">:show</span>, <span class="key">status</span>: <span class="symbol">:ok</span>, <span class="key">location</span>: <span class="instance-variable">@project</span> }
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>      <span class="keyword">else</span>
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>        format.html { render <span class="symbol">:edit</span> }
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>        format.json { render <span class="key">json</span>: <span class="instance-variable">@project</span>.errors, <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>      <span class="keyword">end</span>
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n60" name="n60">60</a></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L50">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L50">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L50" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n50" name="n50">50</a></span>  <span class="keyword">def</span> <span class="function">update</span>
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>      <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.update(attachment_params)
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>        format.html { redirect_to <span class="instance-variable">@attachment</span>, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Attachment was successfully updated.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>        format.json { render <span class="symbol">:show</span>, <span class="key">status</span>: <span class="symbol">:ok</span>, <span class="key">location</span>: <span class="instance-variable">@attachment</span> }
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>      <span class="keyword">else</span>
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>        format.html { render <span class="symbol">:edit</span> }
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>        format.json { render <span class="key">json</span>: <span class="instance-variable">@attachment</span>.errors, <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>      <span class="keyword">end</span>
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n60" name="n60">60</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L61">NotificationsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L61">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L61" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:50
app/controllers/notifications_controller.rb:61
app/controllers/projects_controller.rb:49&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/notifications_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n61" name="n61">61</a></span>  <span class="keyword">def</span> <span class="function">update</span>
<span class="line-numbers"><a href="#n62" name="n62">62</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n63" name="n63">63</a></span>      <span class="keyword">if</span> <span class="instance-variable">@notification</span>.update(notification_params)
<span class="line-numbers"><a href="#n64" name="n64">64</a></span>        format.html { redirect_to <span class="instance-variable">@notification</span>, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Notification was successfully updated.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>        format.json { render <span class="symbol">:show</span>, <span class="key">status</span>: <span class="symbol">:ok</span>, <span class="key">location</span>: <span class="instance-variable">@notification</span> }
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>      <span class="keyword">else</span>
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>        format.html { render <span class="symbol">:edit</span> }
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>        format.json { render <span class="key">json</span>: <span class="instance-variable">@notification</span>.errors, <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>      <span class="keyword">end</span>
<span class="line-numbers"><a href="#n70" name="n70">70</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550302" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550302" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550302">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapse15550302">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:44
app/controllers/users_controller.rb:62&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550302" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/admin/users_controller.rb:44
app/controllers/users_controller.rb:62</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:44
app/controllers/users_controller.rb:62&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/admin/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L62">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L62">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L62" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:44
app/controllers/users_controller.rb:62&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L44" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:44
app/controllers/users_controller.rb:62&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/admin/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n44" name="n44">44</a></span>  <span class="keyword">def</span> <span class="function">update</span>
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>    <span class="comment"># Para que devise no de error si falta el pass.</span>
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>    <span class="keyword">if</span> params[<span class="symbol">:user</span>][<span class="symbol">:password</span>].blank?
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>      params[<span class="symbol">:user</span>].delete(<span class="symbol">:password</span>)
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>      params[<span class="symbol">:user</span>].delete(<span class="symbol">:password_confirmation</span>)
<span class="line-numbers"><a href="#n49" name="n49">49</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n50" name="n50">50</a></span>
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>      <span class="keyword">if</span> <span class="instance-variable">@user</span>.update(user_params)
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>        format.html { redirect_to <span class="instance-variable">@user</span> , <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Información actualizada correctamente.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>        format.json { head <span class="symbol">:no_content</span> }
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>      <span class="keyword">else</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L62">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L62">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L62" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:44
app/controllers/users_controller.rb:62&lt;/pre&gt;">update <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n62" name="n62">62</a></span>  <span class="keyword">def</span> <span class="function">update</span>
<span class="line-numbers"><a href="#n63" name="n63">63</a></span>    <span class="comment"># Para que devise no de error si falta el pass.</span>
<span class="line-numbers"><a href="#n64" name="n64">64</a></span>    <span class="keyword">if</span> params[<span class="symbol">:user</span>][<span class="symbol">:password</span>].blank?
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>      params[<span class="symbol">:user</span>].delete(<span class="symbol">:password</span>)
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>      params[<span class="symbol">:user</span>].delete(<span class="symbol">:password_confirmation</span>)
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n70" name="n70">70</a></span>      <span class="keyword">if</span> <span class="instance-variable">@user</span>.update(user_params)
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>        format.html { redirect_to <span class="instance-variable">@user</span> , <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Información actualizada correctamente.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>        format.json { head <span class="symbol">:no_content</span> }
<span class="line-numbers"><a href="#n73" name="n73">73</a></span>      <span class="keyword">else</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550303" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550303" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550303">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse15550303">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:28
app/controllers/users_controller.rb:46&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550303" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/admin/users_controller.rb:28
app/controllers/users_controller.rb:46</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:28
app/controllers/users_controller.rb:46&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/admin/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L46">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L46">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L46" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:28
app/controllers/users_controller.rb:46&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/admin/users_controller.rb#L28" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:28
app/controllers/users_controller.rb:46&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/admin/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n28" name="n28">28</a></span>  <span class="keyword">def</span> <span class="function">create</span>
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>    <span class="instance-variable">@user</span> = <span class="constant">User</span>.new(user_params)
<span class="line-numbers"><a href="#n30" name="n30">30</a></span>
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>      <span class="keyword">if</span> <span class="instance-variable">@user</span>.save
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>        format.html { redirect_to <span class="instance-variable">@user</span> , <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Usuario registrado correctamente.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>        format.json { render <span class="string"><span class="delimiter">'</span><span class="content">devise/show</span><span class="delimiter">'</span></span> , <span class="key">status</span>: <span class="symbol">:created</span>, <span class="key">location</span>: <span class="instance-variable">@user</span> }
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>      <span class="keyword">else</span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/registration/new</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>        format.json { render <span class="key">json</span>: <span class="instance-variable">@user</span>.errors , <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>      <span class="keyword">end</span>
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>    <span class="keyword">end</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L46">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L46">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L46" target="_blank" title="&lt;pre&gt;app/controllers/admin/users_controller.rb:28
app/controllers/users_controller.rb:46&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n46" name="n46">46</a></span>  <span class="keyword">def</span> <span class="function">create</span>
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>    <span class="instance-variable">@user</span> = <span class="constant">User</span>.new(user_params)
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>
<span class="line-numbers"><a href="#n49" name="n49">49</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n50" name="n50">50</a></span>      <span class="keyword">if</span> <span class="instance-variable">@user</span>.save
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>        format.html { redirect_to <span class="instance-variable">@user</span> , <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Usuario registrado correctamente.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>        format.json { render <span class="string"><span class="delimiter">'</span><span class="content">devise/show</span><span class="delimiter">'</span></span> , <span class="key">status</span>: <span class="symbol">:created</span>, <span class="key">location</span>: <span class="instance-variable">@user</span> }
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>      <span class="keyword">else</span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/new</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>        format.json { render <span class="key">json</span>: <span class="instance-variable">@user</span>.errors , <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>      <span class="keyword">end</span>
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>    <span class="keyword">end</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550304" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550304" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550304">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapse15550304">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:37
app/controllers/projects_controller.rb:36&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550304" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/attachments_controller.rb:37
app/controllers/projects_controller.rb:36</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:37
app/controllers/projects_controller.rb:36&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/projects_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L37">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L37">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L37" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:37
app/controllers/projects_controller.rb:36&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L36" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:37
app/controllers/projects_controller.rb:36&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/projects_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n36" name="n36">36</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>      <span class="keyword">if</span> <span class="instance-variable">@project</span>.save
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>        format.html { redirect_to <span class="instance-variable">@project</span>, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Project was successfully created.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>        format.json { render <span class="symbol">:show</span>, <span class="key">status</span>: <span class="symbol">:created</span>, <span class="key">location</span>: <span class="instance-variable">@project</span> }
<span class="line-numbers"><a href="#n40" name="n40">40</a></span>      <span class="keyword">else</span>
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>        format.html { render <span class="symbol">:new</span> }
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>        format.json { render <span class="key">json</span>: <span class="instance-variable">@project</span>.errors, <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>      <span class="keyword">end</span>
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>  <span class="comment"># PATCH/PUT /projects/1</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L37">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L37">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L37" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:37
app/controllers/projects_controller.rb:36&lt;/pre&gt;">create <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n37" name="n37">37</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>      <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.save
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>        format.html { redirect_to <span class="instance-variable">@attachment</span>, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Attachment was successfully created.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n40" name="n40">40</a></span>        format.json { render <span class="symbol">:show</span>, <span class="key">status</span>: <span class="symbol">:created</span>, <span class="key">location</span>: <span class="instance-variable">@attachment</span> }
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>      <span class="keyword">else</span>
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>        format.html { render <span class="symbol">:new</span> }
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>        format.json { render <span class="key">json</span>: <span class="instance-variable">@attachment</span>.errors, <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>      <span class="keyword">end</span>
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>  <span class="comment"># PATCH/PUT /attachments/1</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550305" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="3">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550305" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550305">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion4" href="#collapse15550305">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
       and 2 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550305" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/projects_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L64">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L64">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L64" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L75">NotificationsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L75">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L75" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/notifications_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63">ProjectsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/projects_controller.rb#L63" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/projects_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n63" name="n63">63</a></span>  <span class="keyword">def</span> <span class="function">destroy</span>
<span class="line-numbers"><a href="#n64" name="n64">64</a></span>    <span class="instance-variable">@project</span>.destroy
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>      format.html { redirect_to projects_url, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Project was successfully destroyed.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>      format.json { head <span class="symbol">:no_content</span> }
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n70" name="n70">70</a></span>
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>  private
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>    <span class="comment"># Use callbacks to share common setup or constraints between actions.</span>
<span class="line-numbers"><a href="#n73" name="n73">73</a></span>    <span class="keyword">def</span> <span class="function">set_project</span>
<span class="line-numbers"><a href="#n74" name="n74">74</a></span>      <span class="instance-variable">@project</span> = <span class="constant">Project</span>.find(params[<span class="symbol">:id</span>])
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L64">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L64">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L64" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n64" name="n64">64</a></span>  <span class="keyword">def</span> <span class="function">destroy</span>
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>    <span class="instance-variable">@attachment</span>.destroy
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>      format.html { redirect_to attachments_url, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Attachment was successfully destroyed.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>      format.json { head <span class="symbol">:no_content</span> }
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n70" name="n70">70</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>  <span class="keyword">def</span> <span class="function">download</span>
<span class="line-numbers"><a href="#n73" name="n73">73</a></span>    <span class="comment">#El send_file falla con esta versión de Refile.</span>
<span class="line-numbers"><a href="#n74" name="n74">74</a></span>    <span class="comment">#dire = (URI.parse(URI.encode(request.base_url + Refile.attachment_url(@attachment, :profile_image)))).to_s</span>
<span class="line-numbers"><a href="#n75" name="n75">75</a></span>    <span class="comment">#send_file
 Refile.attachment_url(@attachment, :profile_image), filename: 
@attachment.profile_image_filename, type: 
@attachment.profile_image_content_type, disposition: :attachment</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L75">NotificationsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L75">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L75" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:64
app/controllers/notifications_controller.rb:75
app/controllers/projects_controller.rb:63&lt;/pre&gt;">destroy <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/notifications_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n75" name="n75">75</a></span>  <span class="keyword">def</span> <span class="function">destroy</span>
<span class="line-numbers"><a href="#n76" name="n76">76</a></span>    <span class="instance-variable">@notification</span>.destroy
<span class="line-numbers"><a href="#n77" name="n77">77</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n78" name="n78">78</a></span>      format.html { redirect_to project_notifications_url, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Notification was successfully destroyed.</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n79" name="n79">79</a></span>      format.json { head <span class="symbol">:no_content</span> }
<span class="line-numbers"><a href="#n80" name="n80">80</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n81" name="n81">81</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n82" name="n82">82</a></span>
<span class="line-numbers"><a href="#n83" name="n83">83</a></span>  <span class="keyword">def</span> <span class="function">update_project</span>
<span class="line-numbers"><a href="#n84" name="n84">84</a></span>      <span class="instance-variable">@projects</span> = <span class="constant">Project</span>.where(<span class="string"><span class="delimiter">"</span><span class="content">user_id = ?</span><span class="delimiter">"</span></span>, params[<span class="symbol">:user_id</span>])
<span class="line-numbers"><a href="#n85" name="n85">85</a></span>      respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n86" name="n86">86</a></span>        format.js
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550306" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550306" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550306">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion5" href="#collapse15550306">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:9
app/controllers/notifications_controller.rb:9&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550306" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/attachments_controller.rb:9
app/controllers/notifications_controller.rb:9</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:9
app/controllers/notifications_controller.rb:9&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L9">NotificationsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:9
app/controllers/notifications_controller.rb:9&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/notifications_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9">AttachmentsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/attachments_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:9
app/controllers/notifications_controller.rb:9&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/attachments_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  <span class="keyword">def</span> <span class="function">index</span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span>    <span class="keyword">if</span> !current_user.is_admin? || ( params[<span class="symbol">:notification_id</span>] &amp;&amp; current_user.is_admin?) <span class="comment">#Un cliente</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>     <span class="instance-variable">@attachments</span> = <span class="constant">Attachment</span>.where(<span class="key">notification_id</span>: params[<span class="symbol">:notification_id</span>]).order(<span class="string"><span class="delimiter">'</span><span class="content">created_at DESC</span><span class="delimiter">'</span></span>)
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>   <span class="keyword">else</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>     <span class="instance-variable">@attachments</span> = <span class="constant">Attachment</span>.all.order(<span class="string"><span class="delimiter">'</span><span class="content">created_at DESC</span><span class="delimiter">'</span></span>)
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>   <span class="keyword">end</span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>  <span class="comment"># GET /attachments/1</span>
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>  <span class="comment"># GET /attachments/1.json</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="keyword">def</span> <span class="function">show</span>
<span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="keyword">end</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L9">NotificationsController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/notifications_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/attachments_controller.rb:9
app/controllers/notifications_controller.rb:9&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/notifications_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  <span class="keyword">def</span> <span class="function">index</span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span>    <span class="keyword">if</span> !current_user.is_admin? || ( params[<span class="symbol">:project_id</span>] &amp;&amp; current_user.is_admin?) <span class="comment">#Un cliente</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>     <span class="instance-variable">@notifications</span> = <span class="constant">Notification</span>.where(<span class="key">project_id</span>: params[<span class="symbol">:project_id</span>]).order(<span class="string"><span class="delimiter">'</span><span class="content">date DESC</span><span class="delimiter">'</span></span>)
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>     <span class="comment">#raise 'Oops'</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>   <span class="keyword">else</span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>     <span class="instance-variable">@notifications</span> = <span class="constant">Notification</span>.all.order(<span class="string"><span class="delimiter">'</span><span class="content">date DESC</span><span class="delimiter">'</span></span>)
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>   <span class="keyword">end</span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>  <span class="comment"># GET /notifications/1</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="comment"># GET /notifications/1.json</span>
<span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="keyword">def</span> <span class="function">show</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550307" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550307" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550307">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion6" href="#collapse15550307">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:9
app/controllers/users_controller.rb:28&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550307" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/users_controller.rb:9
app/controllers/users_controller.rb:28</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:9
app/controllers/users_controller.rb:28&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L28">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L28">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L28" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:9
app/controllers/users_controller.rb:28&lt;/pre&gt;">new <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L9" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:9
app/controllers/users_controller.rb:28&lt;/pre&gt;">index <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  <span class="keyword">def</span> <span class="function">index</span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span>    <span class="instance-variable">@users</span> = <span class="constant">User</span>.all
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>     respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/index</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        format.json { render <span class="string"><span class="delimiter">'</span><span class="content">devise/index</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>  <span class="comment"># GET /users/1</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="comment"># GET /users/1.json</span>
<span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="keyword">def</span> <span class="function">show</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L28">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L28">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L28" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:9
app/controllers/users_controller.rb:28&lt;/pre&gt;">new <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n28" name="n28">28</a></span>  <span class="keyword">def</span> <span class="function">new</span>
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>    <span class="instance-variable">@user</span> = <span class="constant">User</span>.new
<span class="line-numbers"><a href="#n30" name="n30">30</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/new</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>        format.json { render <span class="string"><span class="delimiter">'</span><span class="content">devise/new</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>  <span class="comment"># GET /users/1/edit</span>
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>  <span class="keyword">def</span> <span class="function">edit</span>
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>          respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/edit</span><span class="delimiter">'</span></span> }
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550308" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550308" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550308">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion7" href="#collapse15550308">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/index.html.erb#L26" target="_blank" title="&lt;pre&gt;app/views/notifications/show.html.erb:50
app/views/projects/index.html.erb:26&lt;/pre&gt;">app/views/projects/index.html.erb:26 <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550308" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/views/notifications/show.html.erb:50
app/views/projects/index.html.erb:26</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/index.html.erb#L26" target="_blank" title="&lt;pre&gt;app/views/notifications/show.html.erb:50
app/views/projects/index.html.erb:26&lt;/pre&gt;">app/views/projects/index.html.erb:26 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L50" target="_blank" title="&lt;pre&gt;app/views/notifications/show.html.erb:50
app/views/projects/index.html.erb:26&lt;/pre&gt;">app/views/notifications/show.html.erb:50 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/index.html.erb#L26" target="_blank" title="&lt;pre&gt;app/views/notifications/show.html.erb:50
app/views/projects/index.html.erb:26&lt;/pre&gt;">app/views/projects/index.html.erb:26 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n26" name="n26">26</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>      <span class="tag">&lt;/tr&gt;</span>
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>  <span class="tag">&lt;/tbody&gt;</span>
<span class="line-numbers"><a href="#n30" name="n30">30</a></span><span class="tag">&lt;/table&gt;</span>
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>
<span class="line-numbers"><a href="#n32" name="n32">32</a></span><span class="tag">&lt;h4&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="string"><span class="delimiter">"</span><span class="content">Proyectos de:</span><span class="delimiter">"</span></span> + current_user.nombre <span class="keyword">if</span> !current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/h4&gt;</span>
<span class="line-numbers"><a href="#n33" name="n33">33</a></span><span class="tag">&lt;/div&gt;</span>
<span class="line-numbers"><a href="#n34" name="n34">34</a></span><span class="tag">&lt;br&gt;</span>
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> breadcrumb <span class="symbol">:projects</span> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L50" target="_blank" title="&lt;pre&gt;app/views/notifications/show.html.erb:50
app/views/projects/index.html.erb:26&lt;/pre&gt;">app/views/notifications/show.html.erb:50 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n50" name="n50">50</a></span>          <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>         <span class="tag">&lt;/td&gt;</span>
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>        <span class="tag">&lt;/tr&gt;</span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>        <span class="comment">&lt;!-- Collapsed --&gt;</span>
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>        <span class="tag">&lt;tr&gt;</span>
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>          <span class="tag">&lt;td</span> <span class="attribute-name">colspan</span>=<span class="string"><span class="delimiter">"</span><span class="content">4</span><span class="delimiter">"</span></span> <span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>            <span class="tag">&lt;div</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">height</span>: <span class="float">0px</span>;<span class="delimiter">"</span></span> <span class="attribute-name">aria-expanded</span>=<span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">collapse</span><span class="delimiter">"</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">collapse-</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> attachment.id <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>              <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">well</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>                <span class="comment">&lt;!--/show attach --&gt;</span>
<span class="line-numbers"><a href="#n60" name="n60">60</a></span>                  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@attachment</span> = attachment <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>                  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">attachments/show</span><span class="delimiter">"</span></span>, <span class="key">object</span>: <span class="instance-variable">@attachment</span> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550309" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550309" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550309">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion8" href="#collapse15550309">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:20
app/controllers/users_controller.rb:37&lt;/pre&gt;">show <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550309" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/controllers/users_controller.rb:20
app/controllers/users_controller.rb:37</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:20
app/controllers/users_controller.rb:37&lt;/pre&gt;">show <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L37">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L37">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L37" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:20
app/controllers/users_controller.rb:37&lt;/pre&gt;">edit <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L20" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:20
app/controllers/users_controller.rb:37&lt;/pre&gt;">show <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="keyword">def</span> <span class="function">show</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>          respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/show</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        format.json { render <span class="string"><span class="delimiter">'</span><span class="content">devise/show</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>  <span class="comment"># GET /users/new</span>
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>  <span class="keyword">def</span> <span class="function">new</span>
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>    <span class="instance-variable">@user</span> = <span class="constant">User</span>.new
<span class="line-numbers"><a href="#n30" name="n30">30</a></span>    respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/new</span><span class="delimiter">'</span></span> }
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L37">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L37">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L37" target="_blank" title="&lt;pre&gt;app/controllers/users_controller.rb:20
app/controllers/users_controller.rb:37&lt;/pre&gt;">edit <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n37" name="n37">37</a></span>  <span class="keyword">def</span> <span class="function">edit</span>
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>          respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/edit</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n40" name="n40">40</a></span>        format.json { render <span class="string"><span class="delimiter">'</span><span class="content">devise/edit</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>    <span class="keyword">end</span>
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>  <span class="comment"># POST /users</span>
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>  <span class="comment"># POST /users.json</span>
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>  <span class="keyword">def</span> <span class="function">create</span>
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>    <span class="instance-variable">@user</span> = <span class="constant">User</span>.new(user_params)
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550310" data-category="copy_paste" data-severity="major" data-language="ruby" data-size="2">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550310" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550310">
            <img alt="copy_paste" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/copy_paste-693458f680e830b59438006852293510.png" title="Duplication" pagespeed_url_hash="1503438637" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion9" href="#collapse15550310">
          <h3>
            Consider refactoring, similar code detected.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L3" target="_blank" title="&lt;pre&gt;app/views/pages/index.html.erb:3
app/views/pages/index.html.erb:9&lt;/pre&gt;">app/views/pages/index.html.erb:3 <i class="fa fa-github"></i></a>
       and 1 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550310" class="accordion-body  collapse ">
    <div class="accordion-inner">
      <section class="details">
        <h4>Details</h4>
          <pre>app/views/pages/index.html.erb:3
app/views/pages/index.html.erb:9</pre>
          
      </section>

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L3" target="_blank" title="&lt;pre&gt;app/views/pages/index.html.erb:3
app/views/pages/index.html.erb:9&lt;/pre&gt;">app/views/pages/index.html.erb:3 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L9" target="_blank" title="&lt;pre&gt;app/views/pages/index.html.erb:3
app/views/pages/index.html.erb:9&lt;/pre&gt;">app/views/pages/index.html.erb:9 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L3" target="_blank" title="&lt;pre&gt;app/views/pages/index.html.erb:3
app/views/pages/index.html.erb:9&lt;/pre&gt;">app/views/pages/index.html.erb:3 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n3" name="n3">3</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">devise/sessions/new</span><span class="delimiter">"</span></span>  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span><span class="comment">&lt;!--/login --&gt;</span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span><span class="comment">&lt;!--/Bienvenida --&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> user_signed_in? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">bienvenida</span><span class="delimiter">"</span></span>  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span><span class="comment">&lt;!--/bienvenida --&gt;</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span><span class="comment">&lt;!--/Admin --&gt;</span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> user_signed_in? &amp;&amp; current_user.is_admin?  <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L9" target="_blank" title="&lt;pre&gt;app/views/pages/index.html.erb:3
app/views/pages/index.html.erb:9&lt;/pre&gt;">app/views/pages/index.html.erb:9 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">bienvenida</span><span class="delimiter">"</span></span>  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span><span class="comment">&lt;!--/bienvenida --&gt;</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span><span class="comment">&lt;!--/Admin --&gt;</span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> user_signed_in? &amp;&amp; current_user.is_admin?  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">dashboard</span><span class="delimiter">"</span></span>  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span><span class="comment">&lt;!--/Admin --&gt;</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p><strong>WARNING</strong>: the code is similar <strong>not identical</strong>. Call parameters from the different sources may differ slightly.</p>

<p>Code reuse is a standard practice in modern software development. The
 downside of code reuse via replication and copy-paste programming is 
that it leads to code bloat, increasing the technical depth of software 
products and making maintenance costly and time-consuming.</p>

<p><a href="http://en.wikipedia.org/wiki/Duplicate_code" title="" target="_blank">Duplicated code <i class="fa fa-external-link"></i></a></p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Depending on where the code is duplicated from, various refactoring is
available:</p>

<ul>
<li><strong>Same method</strong>: Extract Local Variable</li>
<li><strong>Same class</strong>: <a href="http://www.refactoring.com/catalog/extractMethod.html" title="" target="_blank">Extract Method <i class="fa fa-external-link"></i></a></li>
<li><strong>Same type</strong>: <a href="http://www.refactoring.com/catalog/extractSuperclass.html" title="" target="_blank">Generalization <i class="fa fa-external-link"></i></a>,
<a href="http://www.refactoring.com/catalog/pullUpMethod.html" title="" target="_blank">Pull Up <i class="fa fa-external-link"></i></a></li>
<li><strong>Different type</strong>: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" title="" target="_blank">Strategy Pattern <i class="fa fa-external-link"></i></a>,
<a href="http://en.wikipedia.org/wiki/Mixin" title="" target="_blank">Mixin <i class="fa fa-external-link"></i></a></li>
<li><strong>Different app</strong>: <a href="http://blog.8thcolor.com/2012/09/modularization-in-rails-a-case-study/" title="" target="_blank">Extract a gem <i class="fa fa-external-link"></i></a></li>
</ul>

<p>For <code class="prettyprint">switch</code> statements, or <code class="prettyprint">if-else-if</code>, these should be replaced with
polymorphism.</p>

<p>We don't report these duplications yet, but would be interested to know the
associated refactoring:</p>

<ul>
<li><strong>Same content in Views</strong>: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Partials <i class="fa fa-external-link"></i></a></li>
<li><strong>Same presentation logic in Views</strong>: <a href="https://en.wikibooks.org/wiki/Ruby_on_Rails/ActionView/Custom_Helpers" title="" target="_blank">Helpers <i class="fa fa-external-link"></i></a></li>
</ul>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li>Our take on <a href="http://blog.8thcolor.com/2013/06/duplication-is-a-rampant-disease/" title="" target="_blank">Duplication is a rampant disease <i class="fa fa-external-link"></i></a></li>
<li><a href="http://www.informit.com/store/refactoring-ruby-edition-9780321603500" title="" target="_blank">Refactoring: Ruby Edition <i class="fa fa-external-link"></i></a></li>
<li><a href="https://learn.thoughtbot.com/products/13-ruby-science" title="" target="_blank">Ruby science <i class="fa fa-external-link"></i></a></li>
<li><a href="http://martinfowler.com/books/refactoring.html" title="" target="_blank">Refactoring: Improving the Design of Existing Code <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ghendry.net/refactor.html" title="" target="_blank">Refactoring Notes <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Consider%20refactoring%2C%20similar%20code%20detected.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="https://github.com/seattlerb" title="" target="_blank">seattlerb's <i class="fa fa-external-link"></i></a> work on <a href="http://sadi.st/Flay.html" title="" target="_blank">Flay <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/seattlerb/flay/blob/master/README.txt" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550312" data-category="code_smell" data-severity="major" data-language="ruby" data-size="1">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550312" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550312">
            <img alt="code_smell" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/code_smell-be5b65e8b093ccd871652e14886d2837.png" title="Code smell" pagespeed_url_hash="1513149161" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion10" href="#collapse15550312">
          <h3>
            Reduce the number of parameters.
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/features/step_definitions/identificacion_steps.rb#L33" target="_blank">features/step_definitions/identificacion_steps.rb:33 <i class="fa fa-github"></i></a>
      

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550312" class="accordion-body  collapse ">
    <div class="accordion-inner">

    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/features/step_definitions/identificacion_steps.rb#L33" target="_blank">features/step_definitions/identificacion_steps.rb:33 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=features/step_definitions/identificacion_steps.rb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n31" name="n31">31</a></span><span class="keyword">end</span>
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n33" name="n33">33</a></strong></span>Dado(<span class="regexp"><span class="delimiter">/</span><span class="content">^existe un Usuario: "(.*?)", "(.*?)", "(.*?)" y "(.*?)"$</span><span class="delimiter">/</span></span>) <span class="keyword">do</span> |nombre, email, clave, tipo|
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>    <span class="instance-variable">@user</span> = <span class="constant">User</span>.create!({
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>    <span class="symbol">:nombre</span> =&gt; nombre,
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>    <span class="symbol">:email</span> =&gt; email,
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>Let's assume</p>
<div class="CodeRay">
  <div class="code"><pre><span class="keyword">def</span> <span class="function">my_method</span>(width, height, show_border, show_header)
  <span class="comment"># ...</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>when you call it</p>
<div class="CodeRay">
  <div class="code"><pre>my_method(<span class="integer">400</span>, <span class="integer">50</span>, <span class="predefined-constant">false</span>, <span class="predefined-constant">true</span>)
</pre></div>
</div>

<p>What are the meanings of numbers <code class="prettyprint">400</code> and <code class="prettyprint">50</code>, the <code class="prettyprint">false</code> and <code class="prettyprint">true</code>?</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <h3>Parameters as hash options</h3>

<p>When you use <code class="prettyprint">Hash</code> options replacing standard arguments, you lose clarity in
the method signature, but gain clarity whenever you call the method
thanks to the pseudo-named parameters by using <code class="prettyprint">Hash</code> options.</p>

<p><strong>method signature</strong>
<code class="prettyprint">
def my_method(options)
     height = options[:height]
     #...
end
</code></p>

<p><strong>method call</strong>
<code class="prettyprint">
my_method(width: 400, height: 50, show_border: false, show_header: true)
my_method(show_header: true, show_border: false, width: 400, height: 50)
</code></p>

<p>You don't need to use the same order in invocation and the key documents the
attributes. The invocation is more readable, the implementation should now deal
with:</p>

<ul>
<li>the presence/validation of the parameters,</li>
<li>misspelled keys, and</li>
<li>wrong types.</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>my_method(<span class="key">show_header</span>: <span class="integer">400</span>, <span class="key">show_border</span>: <span class="integer">50</span>, <span class="key">withs</span>: <span class="integer">400</span>, <span class="key">haights</span>: <span class="integer">50</span>)
</pre></div>
</div>

<h3>Introduce a real model</h3>

<p>Group related attributes:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="keyword">class</span> <span class="class">TableSettings</span>
  attr_accessor <span class="symbol">:show_header</span>, <span class="symbol">:show_border</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>Then use them</p>
<div class="CodeRay">
  <div class="code"><pre>dimension = <span class="constant">Dimension</span>.new(<span class="key">width</span>: <span class="integer">400</span>, <span class="key">height</span>: <span class="integer">50</span>)
table_setting = <span class="constant">TableSettings</span>.new(<span class="key">show_header</span>: <span class="predefined-constant">true</span>, <span class="key">show_border</span>: <span class="predefined-constant">false</span>)
my_method(dimension, table_settings)
</pre></div>
</div>

<h3>Ruby 2.0 keyword arguments</h3>

<p>Ruby 2.0 introduces keyword arguments:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="keyword">def</span> <span class="function">my_method</span>(<span class="key">width</span>: <span class="integer">400</span>, <span class="key">height</span>: <span class="integer">50</span>, <span class="key">show_border</span>: <span class="predefined-constant">false</span>, <span class="key">show_header</span>: <span class="predefined-constant">true</span>)
  <span class="comment"># ...</span>
<span class="keyword">end</span>
</pre></div>
</div>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li><a href="http://www.lukeredpath.co.uk/blog/using-ruby-hashes-as-keyword-arguments-with-easy-defaults.html" title="" target="_blank">Using hashes as keyword arguments <i class="fa fa-external-link"></i></a></li>
<li><a href="http://ruby.about.com/od/beginningruby/ss/Keyword-Arguments.htm" title="" target="_blank">Several posts about <i class="fa fa-external-link"></i></a>
<a href="http://jp.rubyist.net/magazine/?Ruby200SpecialEn-kwarg" title="" target="_blank">Keyword Arguments <i class="fa fa-external-link"></i></a>
<a href="http://ugisozols.com/blog/2013/03/21/ruby-2-dot-0-keyword-arguments/" title="" target="_blank">in Ruby 2.0 <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Reduce%20the%20number%20of%20parameters.">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="http://simplabs.com/" title="" target="_blank">Marco Otte-Witte's <i class="fa fa-external-link"></i></a> work on <a href="http://simplabs.com/excellent/" title="" target="_blank">Excellent <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/simplabs/excellent/blob/master/MIT-LICENSE" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550313" data-category="design" data-severity="major" data-language="ruby" data-size="3">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550313" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550313">
            <img alt="design" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/design-cd83b50142b863ee4d70d39efb151d8b.png" title="Design" pagespeed_url_hash="3652635549" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion11" href="#collapse15550313">
          <h3>
            Move model logic into the model
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
       and 2 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550313" class="accordion-body  collapse ">
    <div class="accordion-inner">

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        move model logic into model (project use_count &gt; 4)
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n49" name="n49">49</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n50" name="n50">50</a></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n51" name="n51">51</a></strong></span>  <span class="keyword">def</span> <span class="function">is_owner</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>    <span class="keyword">return</span> <span class="predefined-constant">false</span> <span class="keyword">unless</span> current_user
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>    <span class="comment"># logger.info(current_user.is_admin?)</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        move model logic into model (notification use_count &gt; 4)
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n49" name="n49">49</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n50" name="n50">50</a></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n51" name="n51">51</a></strong></span>  <span class="keyword">def</span> <span class="function">is_owner</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>    <span class="keyword">return</span> <span class="predefined-constant">false</span> <span class="keyword">unless</span> current_user
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>    <span class="comment"># logger.info(current_user.is_admin?)</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L51" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        move model logic into model (current_user use_count &gt; 4)
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n49" name="n49">49</a></span>  <span class="keyword">end</span>
<span class="line-numbers"><a href="#n50" name="n50">50</a></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n51" name="n51">51</a></strong></span>  <span class="keyword">def</span> <span class="function">is_owner</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>    <span class="keyword">return</span> <span class="predefined-constant">false</span> <span class="keyword">unless</span> current_user
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>    <span class="comment"># logger.info(current_user.is_admin?)</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>Fat controllers should be avoided and unnecessary, as the controller role should
limit itself to managing the interactions between the HTTP world (requests and
responses) and the various model objects. Complex code inside a controller is
often a sign that a part of it should be moved to its appropriate model:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># app/controllers/posts_controller.rb</span>
<span class="keyword">class</span> <span class="class">PostsController</span> &lt; <span class="constant">ApplicationController</span>
  <span class="keyword">def</span> <span class="function">publish</span>
    <span class="instance-variable">@post</span> = <span class="constant">Post</span>.find(params[<span class="symbol">:id</span>])
    <span class="instance-variable">@post</span>.update_attribute(<span class="symbol">:is_published</span>, <span class="predefined-constant">true</span>)
    <span class="instance-variable">@post</span>.approved_by = current_user
    <span class="keyword">if</span> <span class="instance-variable">@post</span>.created_at &gt; <span class="constant">Time</span>.now - <span class="integer">7</span>.days
      <span class="instance-variable">@post</span>.popular = <span class="integer">100</span>
    <span class="keyword">else</span>
      <span class="instance-variable">@post</span>.popular = <span class="integer">0</span>
    <span class="keyword">end</span>

    redirect_to post_url(<span class="instance-variable">@post</span>)
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>This code could easily be moved inside the <code class="prettyprint">User</code> model.</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Move the condition inside of the <code class="prettyprint">Post</code> model:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># app/models/post.rb</span>
<span class="keyword">class</span> <span class="class">Post</span> &lt; <span class="constant">ActiveRecord</span>::<span class="constant">Base</span>
  <span class="keyword">def</span> <span class="function">publish</span>
    <span class="predefined-constant">self</span>.is_published = <span class="predefined-constant">true</span>
    <span class="predefined-constant">self</span>.approved_by = current_user
    <span class="keyword">if</span> <span class="predefined-constant">self</span>.created_at &gt; <span class="constant">Time</span>.now - <span class="integer">7</span>.days
      <span class="predefined-constant">self</span>.popular = <span class="integer">100</span>
    <span class="keyword">else</span>
      <span class="predefined-constant">self</span>.popular = <span class="integer">0</span>
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="comment"># app/controllers/posts_controller.rb</span>
<span class="keyword">class</span> <span class="class">PostsController</span> &lt; <span class="constant">ApplicationController</span>
  <span class="keyword">def</span> <span class="function">publish</span>
    <span class="instance-variable">@post</span> = <span class="constant">Post</span>.find(params[<span class="symbol">:id</span>])
    <span class="instance-variable">@post</span>.publish

    redirect_to post_url(<span class="instance-variable">@post</span>)
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></div>
</div>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li><a href="http://guides.rubyonrails.org/getting_started.html#the-mvc-architecture" title="" target="_blank">Rails MVC Architecture <i class="fa fa-external-link"></i></a></li>
<li><a href="http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model" title="" target="_blank">Refactoring from fat Views and Controllers toward Models <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Move%20model%20logic%20into%20the%20model">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            
          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550314" data-category="design" data-severity="major" data-language="ruby" data-size="42">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550314" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550314">
            <img alt="design" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/design-cd83b50142b863ee4d70d39efb151d8b.png" title="Design" pagespeed_url_hash="3652635549" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion12" href="#collapse15550314">
          <h3>
            Replace instance variable with local variable
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L1" target="_blank">app/views/notifications/_form.html.erb:1 <i class="fa fa-github"></i></a>
       and 41 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550314" class="accordion-body  collapse ">
    <div class="accordion-inner">

        <section class="perf_warning">
          <h4>Info</h4>
          For performance reasons, you <strong>only see the 20 first locations</strong>.
        </section>
      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L1" target="_blank">app/views/notifications/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L1" target="_blank">app/views/attachments/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L1" target="_blank">app/views/projects/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L1" target="_blank">app/views/devise/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L2" target="_blank">app/views/devise/_form.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L2" target="_blank">app/views/projects/_form.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L2" target="_blank">app/views/attachments/_form.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L3" target="_blank">app/views/notifications/_form.html.erb:3 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L4" target="_blank">app/views/attachments/_form.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L4" target="_blank">app/views/attachments/_show.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L4" target="_blank">app/views/projects/_form.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L4" target="_blank">app/views/devise/_form.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L5" target="_blank">app/views/notifications/_form.html.erb:5 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L6" target="_blank">app/views/attachments/_show.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L6" target="_blank">app/views/attachments/_form.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L6" target="_blank">app/views/devise/_form.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L6" target="_blank">app/views/projects/_form.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L7" target="_blank">app/views/attachments/_show.html.erb:7 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L8" target="_blank">app/views/notifications/_form.html.erb:8 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L1" target="_blank">app/views/notifications/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><strong class="highlighted"><a href="#n1" name="n1">1</a></strong></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for(<span class="instance-variable">@notification</span>) <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@notification</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L1" target="_blank">app/views/attachments/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><strong class="highlighted"><a href="#n1" name="n1">1</a></strong></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for(<span class="instance-variable">@attachment</span>) <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@attachment</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this attachment from being saved:<span class="tag">&lt;/h2&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L1" target="_blank">app/views/projects/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><strong class="highlighted"><a href="#n1" name="n1">1</a></strong></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for(<span class="instance-variable">@project</span>) <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@project</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@project</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this project from being saved:<span class="tag">&lt;/h2&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L1" target="_blank">app/views/devise/_form.html.erb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><strong class="highlighted"><a href="#n1" name="n1">1</a></strong></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for <span class="instance-variable">@user</span> <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@user</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@user</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this user from being saved:<span class="tag">&lt;/h2&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L2" target="_blank">app/views/devise/_form.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for <span class="instance-variable">@user</span> <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n2" name="n2">2</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@user</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@user</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this user from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L2" target="_blank">app/views/projects/_form.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for(<span class="instance-variable">@project</span>) <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n2" name="n2">2</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@project</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@project</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this project from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L2" target="_blank">app/views/attachments/_form.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for(<span class="instance-variable">@attachment</span>) <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n2" name="n2">2</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@attachment</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this attachment from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L3" target="_blank">app/views/notifications/_form.html.erb:3 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> form_for(<span class="instance-variable">@notification</span>) <span class="keyword">do</span> |f| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n3" name="n3">3</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@notification</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@notification</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this notification from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L4" target="_blank">app/views/attachments/_form.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n2" name="n2">2</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n4" name="n4">4</a></strong></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@attachment</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this attachment from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@attachment</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> message <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/li&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L4" target="_blank">app/views/attachments/_show.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n2" name="n2">2</a></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n4" name="n4">4</a></strong></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.profile_image_id? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;p&gt;</span> Pre-visualización del adjunto: <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.extension == <span class="string"><span class="delimiter">"</span><span class="content">pdf</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;iframe</span> <span class="attribute-name">width</span>=<span class="string"><span class="delimiter">'</span><span class="content">100%</span><span class="delimiter">'</span></span> <span class="attribute-name">height</span>=<span class="string"><span class="delimiter">'</span><span class="content">800 px</span><span class="delimiter">'</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> request.base_url + <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">'</span></span> <span class="attribute-name">frameborder</span>=<span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> <span class="attribute-name">allowfullscreen</span><span class="tag">&gt;</span><span class="tag">&lt;/iframe&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L4" target="_blank">app/views/projects/_form.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n2" name="n2">2</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@project</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n4" name="n4">4</a></strong></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@project</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this project from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@project</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> message <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/li&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L4" target="_blank">app/views/devise/_form.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n2" name="n2">2</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@user</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n4" name="n4">4</a></strong></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@user</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this user from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@user</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> message <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/li&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L5" target="_blank">app/views/notifications/_form.html.erb:5 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n3" name="n3">3</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@notification</span>.errors.any? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">error_explanation</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n5" name="n5">5</a></strong></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@notification</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this notification from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"><a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@notification</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L6" target="_blank">app/views/attachments/_show.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n4" name="n4">4</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.profile_image_id? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;p&gt;</span> Pre-visualización del adjunto: <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n6" name="n6">6</a></strong></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.extension == <span class="string"><span class="delimiter">"</span><span class="content">pdf</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;iframe</span> <span class="attribute-name">width</span>=<span class="string"><span class="delimiter">'</span><span class="content">100%</span><span class="delimiter">'</span></span> <span class="attribute-name">height</span>=<span class="string"><span class="delimiter">'</span><span class="content">800 px</span><span class="delimiter">'</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> request.base_url + <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">'</span></span> <span class="attribute-name">frameborder</span>=<span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> <span class="attribute-name">allowfullscreen</span><span class="tag">&gt;</span><span class="tag">&lt;/iframe&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_form.html.erb#L6" target="_blank">app/views/attachments/_form.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@attachment</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this attachment from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n6" name="n6">6</a></strong></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@attachment</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> message <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/li&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>      <span class="tag">&lt;/ul&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/devise/_form.html.erb#L6" target="_blank">app/views/devise/_form.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/devise/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@user</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this user from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n6" name="n6">6</a></strong></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@user</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> message <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/li&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>      <span class="tag">&lt;/ul&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/projects/_form.html.erb#L6" target="_blank">app/views/projects/_form.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/projects/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n4" name="n4">4</a></span>      <span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(<span class="instance-variable">@project</span>.errors.count, <span class="string"><span class="delimiter">"</span><span class="content">error</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span> prohibited this project from being saved:<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n6" name="n6">6</a></strong></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@project</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> message <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/li&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>      <span class="tag">&lt;/ul&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L7" target="_blank">app/views/attachments/_show.html.erb:7 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;p&gt;</span> Pre-visualización del adjunto: <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.extension == <span class="string"><span class="delimiter">"</span><span class="content">pdf</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n7" name="n7">7</a></strong></span>        <span class="tag">&lt;iframe</span> <span class="attribute-name">width</span>=<span class="string"><span class="delimiter">'</span><span class="content">100%</span><span class="delimiter">'</span></span> <span class="attribute-name">height</span>=<span class="string"><span class="delimiter">'</span><span class="content">800 px</span><span class="delimiter">'</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> request.base_url + <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">'</span></span> <span class="attribute-name">frameborder</span>=<span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> <span class="attribute-name">allowfullscreen</span><span class="tag">&gt;</span><span class="tag">&lt;/iframe&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/_form.html.erb#L8" target="_blank">app/views/notifications/_form.html.erb:8 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/_form.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n6" name="n6">6</a></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>      <span class="tag">&lt;ul&gt;</span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n8" name="n8">8</a></strong></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@notification</span>.errors.full_messages.each <span class="keyword">do</span> |message| <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> message <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/li&gt;</span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>      <span class="tag">&lt;/ul&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n10" name="n10">10</a></strong></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>       <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>       <span class="tag">&lt;strong&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Descargar Archivo</span><span class="delimiter">"</span></span>, attachments_download_path(<span class="key">id</span>: <span class="instance-variable">@attachment</span>.id) <span class="inline-delimiter">%&gt;</span></span> <span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        replace instance variable with local variable
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n10" name="n10">10</a></strong></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>       <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>       <span class="tag">&lt;strong&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Descargar Archivo</span><span class="delimiter">"</span></span>, attachments_download_path(<span class="key">id</span>: <span class="instance-variable">@attachment</span>.id) <span class="inline-delimiter">%&gt;</span></span> <span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>A partial template - usually just called <em>partial</em> - is a way to modularize the
rendering process. Thanks to partial, you can move common code for rendering
in a dedicated file.</p>

<p>Using instance variables inside a partial breaks that encapsulation. Indeed, it
is very probable that when calling that partial, the instance variables are
named the same.</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># app/controllers/books_controller.rb</span>
<span class="keyword">class</span> <span class="class">BooksController</span> &lt; <span class="constant">ApplicationController</span>
  <span class="keyword">def</span> <span class="function">show</span>
    <span class="instance-variable">@book</span> = book.find(params[<span class="symbol">:id</span>])
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="comment"># app/views/books/index.html.erb</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render :partial </span><span class="delimiter">=</span></span>&gt; <span class="string"><span class="delimiter">"</span><span class="content">sidebar</span><span class="delimiter">"</span></span> %&gt;
</pre></div>
</div>

<p>The <code class="prettyprint">@book</code> instance variable is accessible from the partial above, but what if
you call the sidebar from the view to show an author and the instance variable
is <code class="prettyprint">@author</code>?</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Just pass a variable as <code class="prettyprint">locals</code> to the partial:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># app/views/books/index.html.erb</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render :partial </span><span class="delimiter">=</span></span>&gt; <span class="string"><span class="delimiter">"</span><span class="content">sidebar</span><span class="delimiter">"</span></span>, <span class="symbol">:locals</span> =&gt; { <span class="symbol">:book</span> =&gt; <span class="instance-variable">@book</span> } %&gt;
</pre></div>
</div>

<p>This will help you to keep your partials well defined and documented.</p>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li><a href="http://jakescruggs.blogspot.be/2007/03/rails-partials-should-be-explicitly.html" title="" target="_blank">Always use variables in partials <i class="fa fa-external-link"></i></a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Using Partials in Rails Guide <i class="fa fa-external-link"></i></a></li>
<li><a href="http://stackoverflow.com/questions/2503838/rails-should-partials-be-aware-of-instance-variables" title="" target="_blank">Discussion on Stack Overflow <i class="fa fa-external-link"></i></a></li>
<li><a href="http://blog.8thcolor.com/2013/07/partials-abuse-of-them-dont-abuse-them/" title="" target="_blank">Partials: Abuse of them, don’t abuse them <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Replace%20instance%20variable%20with%20local%20variable">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            
          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550315" data-category="design" data-severity="major" data-language="ruby" data-size="4">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550315" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550315">
            <img alt="design" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/design-cd83b50142b863ee4d70d39efb151d8b.png" title="Design" pagespeed_url_hash="3652635549" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion13" href="#collapse15550315">
          <h3>
            Use scope access
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69" target="_blank">is_owner <i class="fa fa-github"></i></a>
       and 3 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550315" class="accordion-body  collapse ">
    <div class="accordion-inner">

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L79">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L79">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L79" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L81">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L81">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L81" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L90" target="_blank">app/controllers/application_controller.rb:90 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L69" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        use scope access
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n67" name="n67">67</a></span>           project = <span class="constant">Project</span>.find_by_user_id(current_user.id) <span class="keyword">unless</span> current_user.is_admin?
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n69" name="n69">69</a></strong></span>         <span class="keyword">if</span> project &amp;&amp; project.user.id == current_user.id &amp;&amp; !current_user.is_admin?
<span class="line-numbers"><a href="#n70" name="n70">70</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>           security_exit
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L79">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L79">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L79" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        use scope access
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n77" name="n77">77</a></span>         <span class="keyword">if</span> params[<span class="symbol">:action</span>] == <span class="string"><span class="delimiter">"</span><span class="content">index</span><span class="delimiter">"</span></span>
<span class="line-numbers"><a href="#n78" name="n78">78</a></span>           project = <span class="constant">Project</span>.find_by_id(params[<span class="symbol">:project_id</span>])
<span class="line-numbers"><strong class="highlighted"><a href="#n79" name="n79">79</a></strong></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span> <span class="keyword">if</span> project.user.id == current_user.id &amp;&amp; !current_user.is_admin?
<span class="line-numbers"><a href="#n80" name="n80">80</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><a href="#n81" name="n81">81</a></span>         <span class="keyword">if</span> notification &amp;&amp; notification.project.user.id == current_user.id
<span class="line-numbers"><a href="#n82" name="n82">82</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L81">ApplicationController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L81">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L81" target="_blank">is_owner <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        use scope access
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n79" name="n79">79</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span> <span class="keyword">if</span> project.user.id == current_user.id &amp;&amp; !current_user.is_admin?
<span class="line-numbers"><a href="#n80" name="n80">80</a></span>         <span class="keyword">end</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n81" name="n81">81</a></strong></span>         <span class="keyword">if</span> notification &amp;&amp; notification.project.user.id == current_user.id
<span class="line-numbers"><a href="#n82" name="n82">82</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n83" name="n83">83</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n84" name="n84">84</a></span>           security_exit
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/application_controller.rb#L90" target="_blank">app/controllers/application_controller.rb:90 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/application_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        use scope access
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n88" name="n88">88</a></span>         notification = <span class="constant">Notification</span>.find_by_id(params[<span class="symbol">:notification_id</span>]) <span class="keyword">if</span> params[<span class="symbol">:notification_id</span>]
<span class="line-numbers"><a href="#n89" name="n89">89</a></span>         notification = <span class="constant">Attachment</span>.find_by_id(params[<span class="symbol">:id</span>]).notification <span class="keyword">if</span> params[<span class="symbol">:id</span>]
<span class="line-numbers"><strong class="highlighted"><a href="#n90" name="n90">90</a></strong></span>         <span class="keyword">if</span> notification &amp;&amp; notification.project.user.id == current_user.id
<span class="line-numbers"><a href="#n91" name="n91">91</a></span>           <span class="keyword">return</span> <span class="predefined-constant">true</span>
<span class="line-numbers"><a href="#n92" name="n92">92</a></span>         <span class="keyword">else</span>
<span class="line-numbers"><a href="#n93" name="n93">93</a></span>           security_exit
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>When editing or destroying a resource, checking the permission is often
required. It could be done by comparing the owner of object with <code class="prettyprint">current_user</code>:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># app/controllers/books_controller.rb</span>
<span class="keyword">class</span> <span class="class">BooksController</span> &lt; <span class="constant">ApplicationController</span>
  <span class="keyword">def</span> <span class="function">edit</span>
    <span class="instance-variable">@book</span> = book.find(params[<span class="symbol">:id</span>])
    <span class="keyword">if</span> <span class="instance-variable">@book</span>.user != current_user
      flash[<span class="symbol">:warning</span>] = <span class="string"><span class="delimiter">'</span><span class="content">Access denied</span><span class="delimiter">'</span></span>
      redirect_to books_url
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>It is verbose, especially because you need to repeat yourself each time you need
to check.</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Instead, let's use the association to check whether the resource belongs
correctly to the <code class="prettyprint">current_user</code>:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># app/controllers/books_controller.rb</span>
<span class="keyword">class</span> <span class="class">BooksController</span> &lt; <span class="constant">ApplicationController</span>
  <span class="keyword">def</span> <span class="function">edit</span>
    <span class="comment"># raise RecordNotFound exception (404 error) if not found</span>
    <span class="instance-variable">@book</span> = current_user.books.find(params[<span class="symbol">:id</span>])
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>By doing this, the query is restricted to the <code class="prettyprint">books</code> that belong to the
<code class="prettyprint">current_user</code>. If none are found, a 404 error will be raised.</p>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li><a href="http://guides.rubyonrails.org/association_basics.html" title="" target="_blank">Using associations in the Rails Guide <i class="fa fa-external-link"></i></a>.</li>
<li><a href="http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html" title="" target="_blank">Instance methods on associations <i class="fa fa-external-link"></i></a>.</li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Use%20scope%20access">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            
          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550316" data-category="design" data-severity="major" data-language="ruby" data-size="11">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550316" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550316">
            <img alt="design" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/design-cd83b50142b863ee4d70d39efb151d8b.png" title="Design" pagespeed_url_hash="3652635549" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion14" href="#collapse15550316">
          <h3>
            Replace instance variable by parameter in partial
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L4" target="_blank">app/views/attachments/_show.html.erb:4 <i class="fa fa-github"></i></a>
       and 10 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550316" class="accordion-body  collapse ">
    <div class="accordion-inner">

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L4" target="_blank">app/views/attachments/_show.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L6" target="_blank">app/views/attachments/_show.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L7" target="_blank">app/views/attachments/_show.html.erb:7 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L12" target="_blank">app/views/attachments/_show.html.erb:12 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L18" target="_blank">app/views/attachments/_show.html.erb:18 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L18" target="_blank">app/views/attachments/_show.html.erb:18 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L22" target="_blank">app/views/attachments/_show.html.erb:22 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L26" target="_blank">app/views/attachments/_show.html.erb:26 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L4" target="_blank">app/views/attachments/_show.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n2" name="n2">2</a></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n4" name="n4">4</a></strong></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.profile_image_id? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;p&gt;</span> Pre-visualización del adjunto: <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.extension == <span class="string"><span class="delimiter">"</span><span class="content">pdf</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;iframe</span> <span class="attribute-name">width</span>=<span class="string"><span class="delimiter">'</span><span class="content">100%</span><span class="delimiter">'</span></span> <span class="attribute-name">height</span>=<span class="string"><span class="delimiter">'</span><span class="content">800 px</span><span class="delimiter">'</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> request.base_url + <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">'</span></span> <span class="attribute-name">frameborder</span>=<span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> <span class="attribute-name">allowfullscreen</span><span class="tag">&gt;</span><span class="tag">&lt;/iframe&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L6" target="_blank">app/views/attachments/_show.html.erb:6 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n4" name="n4">4</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.profile_image_id? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;p&gt;</span> Pre-visualización del adjunto: <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n6" name="n6">6</a></strong></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.extension == <span class="string"><span class="delimiter">"</span><span class="content">pdf</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        <span class="tag">&lt;iframe</span> <span class="attribute-name">width</span>=<span class="string"><span class="delimiter">'</span><span class="content">100%</span><span class="delimiter">'</span></span> <span class="attribute-name">height</span>=<span class="string"><span class="delimiter">'</span><span class="content">800 px</span><span class="delimiter">'</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> request.base_url + <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">'</span></span> <span class="attribute-name">frameborder</span>=<span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> <span class="attribute-name">allowfullscreen</span><span class="tag">&gt;</span><span class="tag">&lt;/iframe&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L7" target="_blank">app/views/attachments/_show.html.erb:7 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      <span class="tag">&lt;p&gt;</span> Pre-visualización del adjunto: <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.extension == <span class="string"><span class="delimiter">"</span><span class="content">pdf</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n7" name="n7">7</a></strong></span>        <span class="tag">&lt;iframe</span> <span class="attribute-name">width</span>=<span class="string"><span class="delimiter">'</span><span class="content">100%</span><span class="delimiter">'</span></span> <span class="attribute-name">height</span>=<span class="string"><span class="delimiter">'</span><span class="content">800 px</span><span class="delimiter">'</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> request.base_url + <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">'</span></span> <span class="attribute-name">frameborder</span>=<span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> <span class="attribute-name">allowfullscreen</span><span class="tag">&gt;</span><span class="tag">&lt;/iframe&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n10" name="n10">10</a></strong></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>       <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>       <span class="tag">&lt;strong&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Descargar Archivo</span><span class="delimiter">"</span></span>, attachments_download_path(<span class="key">id</span>: <span class="instance-variable">@attachment</span>.id) <span class="inline-delimiter">%&gt;</span></span> <span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n10" name="n10">10</a></strong></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>       <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>       <span class="tag">&lt;strong&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Descargar Archivo</span><span class="delimiter">"</span></span>, attachments_download_path(<span class="key">id</span>: <span class="instance-variable">@attachment</span>.id) <span class="inline-delimiter">%&gt;</span></span> <span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L10" target="_blank">app/views/attachments/_show.html.erb:10 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="comment">#Esto esta así porque attachment_url de ReFile fallaba. </span><span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n10" name="n10">10</a></strong></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>       <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>       <span class="tag">&lt;strong&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Descargar Archivo</span><span class="delimiter">"</span></span>, attachments_download_path(<span class="key">id</span>: <span class="instance-variable">@attachment</span>.id) <span class="inline-delimiter">%&gt;</span></span> <span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L12" target="_blank">app/views/attachments/_show.html.erb:12 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n10" name="n10">10</a></span>        <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to image_tag(<span class="constant">Refile</span>.attachment_url(<span class="instance-variable">@attachment</span>, <span class="symbol">:profile_image</span>), <span class="key">height</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">'</span><span class="content">300</span><span class="delimiter">'</span></span>, <span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="inline"><span class="inline-delimiter">#{</span><span class="instance-variable">@attachment</span>.profile_image_filename<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>), <span class="instance-variable">@attachment</span>.path <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>       <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n12" name="n12">12</a></strong></span>       <span class="tag">&lt;strong&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Descargar Archivo</span><span class="delimiter">"</span></span>, attachments_download_path(<span class="key">id</span>: <span class="instance-variable">@attachment</span>.id) <span class="inline-delimiter">%&gt;</span></span> <span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>  <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L18" target="_blank">app/views/attachments/_show.html.erb:18 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n16" name="n16">16</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    <span class="tag">&lt;strong&gt;</span>Tamaño del archivo:<span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n18" name="n18">18</a></strong></span>    <span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="instance-variable">@attachment</span>.profile_image_size / <span class="integer">1024</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.profile_image_size <span class="inline-delimiter">%&gt;</span></span> Kb
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>    <span class="tag">&lt;strong&gt;</span>Detalle archivo:<span class="tag">&lt;/strong&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L18" target="_blank">app/views/attachments/_show.html.erb:18 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n16" name="n16">16</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    <span class="tag">&lt;strong&gt;</span>Tamaño del archivo:<span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n18" name="n18">18</a></strong></span>    <span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="instance-variable">@attachment</span>.profile_image_size / <span class="integer">1024</span> <span class="keyword">if</span> <span class="instance-variable">@attachment</span>.profile_image_size <span class="inline-delimiter">%&gt;</span></span> Kb
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>    <span class="tag">&lt;strong&gt;</span>Detalle archivo:<span class="tag">&lt;/strong&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L22" target="_blank">app/views/attachments/_show.html.erb:22 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>    <span class="tag">&lt;strong&gt;</span>Detalle archivo:<span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n22" name="n22">22</a></strong></span>    <span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="instance-variable">@attachment</span>.title <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>  <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>    <span class="tag">&lt;strong&gt;</span>Subido el:<span class="tag">&lt;/strong&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/_show.html.erb#L26" target="_blank">app/views/attachments/_show.html.erb:26 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/_show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n24" name="n24">24</a></span>  <span class="tag">&lt;p&gt;</span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>    <span class="tag">&lt;strong&gt;</span>Subido el:<span class="tag">&lt;/strong&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n26" name="n26">26</a></strong></span>    <span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="instance-variable">@attachment</span>.created_at.to_formatted_s(<span class="symbol">:long</span>) <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>  <span class="tag">&lt;/p&gt;</span>
<span class="line-numbers"><a href="#n28" name="n28">28</a></span><span class="tag">&lt;div&gt;</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>This partial uses an instance variable. This pairs the partial to the
controller action or template that includes the partial and that must define
the instance variable.</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Remove all instance variables from the partial, replacing them by parameters
when needed, so instead of:</p>

<p><strong>show.html.erb</strong></p>
<div class="CodeRay">
  <div class="code"><pre>render <span class="key">partial</span>: <span class="string"><span class="delimiter">'</span><span class="content">customer</span><span class="delimiter">'</span></span>
</pre></div>
</div>

<p><strong>_customer.html.erb</strong></p>
<div class="CodeRay">
  <div class="code"><pre>&lt;h1&gt;<span class="key">Name</span>: &lt;<span class="string"><span class="delimiter">%=</span><span class="content"> @customer.name %&gt;&lt;/h1&gt;
</span></span></pre></div>
</div>

<p>Do something like:</p>

<p><strong>show.html.erb</strong></p>
<div class="CodeRay">
  <div class="code"><pre>render <span class="key">partial</span>: <span class="string"><span class="delimiter">'</span><span class="content">customer</span><span class="delimiter">'</span></span>, <span class="key">customer</span>: <span class="instance-variable">@customer</span>
</pre></div>
</div>

<p><strong>_customer.html.erb</strong></p>
<div class="CodeRay">
  <div class="code"><pre>&lt;h1&gt;<span class="key">Name</span>: &lt;<span class="string"><span class="delimiter">%=</span><span class="content"> customer.name %&gt;&lt;/h1&gt;
</span></span></pre></div>
</div>

<p>This allows you to control and limit the information available to the partial,
instead of exposing the whole list of instances available to the calling view,
which makes the partial much easier to update and reuse.</p>

      </section>

      <section class="references">
        <h4>More info</h4>
          <p><a href="http://stackoverflow.com/questions/2503838/rails-should-partials-be-aware-of-instance-variables" title="" target="_blank">Stack Overflow discussion about instance variables in partials and how to avoid them <i class="fa fa-external-link"></i></a></p>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Replace%20instance%20variable%20by%20parameter%20in%20partial">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="http://simplabs.com/" title="" target="_blank">Marco Otte-Witte's <i class="fa fa-external-link"></i></a> work on <a href="http://simplabs.com/excellent/" title="" target="_blank">Excellent <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/simplabs/excellent/blob/master/MIT-LICENSE" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550317" data-category="design" data-severity="major" data-language="ruby" data-size="8">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret major open-badge " data-toggle="collapse" data-target="#collapse15550317" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550317">
            <img alt="design" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/design-cd83b50142b863ee4d70d39efb151d8b.png" title="Design" pagespeed_url_hash="3652635549" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion15" href="#collapse15550317">
          <h3>
            Set variables in place of referencing params in view
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L4" target="_blank">app/views/attachments/index.html.erb:4 <i class="fa fa-github"></i></a>
       and 7 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550317" class="accordion-body  collapse ">
    <div class="accordion-inner">

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L4" target="_blank">app/views/attachments/index.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/index.html.erb#L4" target="_blank">app/views/notifications/index.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/index.html.erb#L5" target="_blank">app/views/notifications/index.html.erb:5 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/index.html.erb#L7" target="_blank">app/views/notifications/index.html.erb:7 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L20" target="_blank">app/views/notifications/show.html.erb:20 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L21" target="_blank">app/views/notifications/show.html.erb:21 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L38" target="_blank">app/views/attachments/index.html.erb:38 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L38" target="_blank">app/views/attachments/index.html.erb:38 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L4" target="_blank">app/views/attachments/index.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n2" name="n2">2</a></span> <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">form-group</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span> <span class="tag">&lt;h1&gt;</span>Listando Archivos Adjuntos<span class="tag">&lt;/h1&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n4" name="n4">4</a></strong></span> <span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="keyword">if</span> params[<span class="symbol">:notification_id</span>] &amp;&amp; current_user.is_admin?</span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span><span class="inline">     link_to <span class="string"><span class="delimiter">'</span><span class="content"> Nuevo adjunto</span><span class="delimiter">'</span></span>, new_notification_attachment_path, <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary fa fa-file-o pull-right</span><span class="delimiter">"</span></span></span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span><span class="inline">   <span class="keyword">end</span></span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span><span class="inline"> <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/index.html.erb#L4" target="_blank">app/views/notifications/index.html.erb:4 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n2" name="n2">2</a></span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">form-group</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span> <span class="tag">&lt;h2&gt;</span>Listando Novedades<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n4" name="n4">4</a></strong></span> <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content"> Nueva Novedad</span><span class="delimiter">'</span></span>, new_notification_path, <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary fa fa-newspaper-o pull-right</span><span class="delimiter">"</span></span> <span class="keyword">unless</span> params[<span class="symbol">:project_id</span>] || !current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span> <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content"> Nueva Novedad</span><span class="delimiter">'</span></span>, new_project_notification_path, <span class="key">title</span>: <span class="string"><span class="delimiter">"</span><span class="content">Nueva novedad para el Proyecto seleccionado.</span><span class="delimiter">"</span></span> , <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary fa fa-folder-o pull-right</span><span class="delimiter">"</span></span> <span class="keyword">if</span> params[<span class="symbol">:project_id</span>] &amp;&amp; current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span><span class="tag">&lt;/div&gt;</span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@project</span> =  <span class="constant">Project</span>.find_by_id(params[<span class="symbol">:project_id</span>]) <span class="inline-delimiter">%&gt;</span></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/index.html.erb#L5" target="_blank">app/views/notifications/index.html.erb:5 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n3" name="n3">3</a></span> <span class="tag">&lt;h2&gt;</span>Listando Novedades<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span> <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content"> Nueva Novedad</span><span class="delimiter">'</span></span>, new_notification_path, <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary fa fa-newspaper-o pull-right</span><span class="delimiter">"</span></span> <span class="keyword">unless</span> params[<span class="symbol">:project_id</span>] || !current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n5" name="n5">5</a></strong></span> <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content"> Nueva Novedad</span><span class="delimiter">'</span></span>, new_project_notification_path, <span class="key">title</span>: <span class="string"><span class="delimiter">"</span><span class="content">Nueva novedad para el Proyecto seleccionado.</span><span class="delimiter">"</span></span> , <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary fa fa-folder-o pull-right</span><span class="delimiter">"</span></span> <span class="keyword">if</span> params[<span class="symbol">:project_id</span>] &amp;&amp; current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n6" name="n6">6</a></span><span class="tag">&lt;/div&gt;</span>
<span class="line-numbers"><a href="#n7" name="n7">7</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@project</span> =  <span class="constant">Project</span>.find_by_id(params[<span class="symbol">:project_id</span>]) <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n8" name="n8">8</a></span><span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="instance-variable">@project</span>.name <span class="keyword">if</span> <span class="instance-variable">@project</span>  <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/h2&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/index.html.erb#L7" target="_blank">app/views/notifications/index.html.erb:7 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n5" name="n5">5</a></span> <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content"> Nueva Novedad</span><span class="delimiter">'</span></span>, new_project_notification_path, <span class="key">title</span>: <span class="string"><span class="delimiter">"</span><span class="content">Nueva novedad para el Proyecto seleccionado.</span><span class="delimiter">"</span></span> , <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary fa fa-folder-o pull-right</span><span class="delimiter">"</span></span> <span class="keyword">if</span> params[<span class="symbol">:project_id</span>] &amp;&amp; current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span><span class="tag">&lt;/div&gt;</span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n7" name="n7">7</a></strong></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@project</span> =  <span class="constant">Project</span>.find_by_id(params[<span class="symbol">:project_id</span>]) <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span><span class="tag">&lt;h2&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> <span class="instance-variable">@project</span>.name <span class="keyword">if</span> <span class="instance-variable">@project</span>  <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span><span class="tag">&lt;table</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">"</span><span class="content">notifications-list</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">table table-striped table-hover</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span>  <span class="tag">&lt;thead&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L20" target="_blank">app/views/notifications/show.html.erb:20 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n18" name="n18">18</a></span>  <span class="tag">&lt;hr</span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">"</span><span class="content">1</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="tag">&lt;h4</span> <span class="attribute-name">align</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Adjuntos:<span class="tag">&lt;/h4&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n20" name="n20">20</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span>  <span class="keyword">if</span> params[<span class="symbol">:id</span>] &amp;&amp; current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>      <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Subir archivo</span><span class="delimiter">'</span></span>, new_notification_attachment_path(params[<span class="symbol">:id</span>]), <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary pull-right</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/notifications/show.html.erb#L21" target="_blank">app/views/notifications/show.html.erb:21 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/notifications/show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="tag">&lt;h4</span> <span class="attribute-name">align</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Adjuntos:<span class="tag">&lt;/h4&gt;</span>
<span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span>  <span class="keyword">if</span> params[<span class="symbol">:id</span>] &amp;&amp; current_user.is_admin? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n21" name="n21">21</a></strong></span>      <span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Subir archivo</span><span class="delimiter">'</span></span>, new_notification_attachment_path(params[<span class="symbol">:id</span>]), <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-primary pull-right</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>  <span class="tag">&lt;table</span>  <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">table</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L38" target="_blank">app/views/attachments/index.html.erb:38 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n36" name="n36">36</a></span><span class="tag">&lt;br&gt;</span>
<span class="line-numbers"><a href="#n37" name="n37">37</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Volver</span><span class="delimiter">'</span></span>, <span class="symbol">:back</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-default</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n38" name="n38">38</a></strong></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Volver a novedad</span><span class="delimiter">'</span></span>, notification_path(params[<span class="symbol">:notification_id</span>]), <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-default</span><span class="delimiter">"</span></span> <span class="keyword">if</span> current_user.is_admin? &amp;&amp; params[<span class="symbol">:notification_id</span>]<span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>
<span class="line-numbers"><a href="#n40" name="n40">40</a></span><span class="tag">&lt;/div&gt;</span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/index.html.erb#L38" target="_blank">app/views/attachments/index.html.erb:38 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n36" name="n36">36</a></span><span class="tag">&lt;br&gt;</span>
<span class="line-numbers"><a href="#n37" name="n37">37</a></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Volver</span><span class="delimiter">'</span></span>, <span class="symbol">:back</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-default</span><span class="delimiter">"</span></span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n38" name="n38">38</a></strong></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Volver a novedad</span><span class="delimiter">'</span></span>, notification_path(params[<span class="symbol">:notification_id</span>]), <span class="key">class</span>: <span class="string"><span class="delimiter">"</span><span class="content">btn btn-default</span><span class="delimiter">"</span></span> <span class="keyword">if</span> current_user.is_admin? &amp;&amp; params[<span class="symbol">:notification_id</span>]<span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>
<span class="line-numbers"><a href="#n40" name="n40">40</a></span><span class="tag">&lt;/div&gt;</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>This view, or partial, accesses the <code class="prettyprint">Hash</code> params. Accessing the <code class="prettyprint">Hash</code> params
directly in views can result in security problems if the value is printed on the
HTML output. In general, it is a bad habit because the controller, which is
actually the part of the application that is responsible for dealing with
parameters, is circumvented.</p>

<p>The hash params can contain values that have been input by the user, and should
be deemed unsecure.</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Replace any usage of the <code class="prettyprint">Hash</code> params by proper variable, should the view or
partial require them.</p>

<p>Instead of:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="key">Filter</span>: &lt;<span class="string"><span class="delimiter">%=</span><span class="content"> params[:filter] %&gt;
</span></span></pre></div>
</div>

<p>Do something like:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="key">Filter</span>: &lt;<span class="string"><span class="delimiter">%=</span><span class="content"> filter %&gt;
</span></span></pre></div>
</div>

<p>with the controller being responsible from extracting <code class="prettyprint">@filter</code> from the <code class="prettyprint">Hash</code>
<code class="prettyprint">params</code>, and passed to the partial as a parameter <code class="prettyprint">filter</code>.</p>

      </section>

      <section class="references">
        <h4>More info</h4>
          
        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Set%20variables%20in%20place%20of%20referencing%20params%20in%20view">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            <p>Rule inspired by <a href="http://simplabs.com/" title="" target="_blank">Marco Otte-Witte's <i class="fa fa-external-link"></i></a> work on <a href="http://simplabs.com/excellent/" title="" target="_blank">Excellent <i class="fa fa-external-link"></i></a>, licenced under the <a href="https://github.com/simplabs/excellent/blob/master/MIT-LICENSE" title="" target="_blank">MIT License <i class="fa fa-external-link"></i></a></p>

          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

  </section>

<div id="more-violations-4" data-url="/github/matiasmasca/novedades/reviews/master?page=4">  <!-- Actions -->

    <section class="section-minor row">
    <article class="accordion action span12" id="accordion15550326" data-category="design" data-severity="minor" data-language="ruby" data-size="3">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret minor open-badge " data-toggle="collapse" data-target="#collapse15550326" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550326">
            <script pagespeed_no_defer="">//<![CDATA[
(function(){var g=this,h=function(b,d){var a=b.split("."),c=g;a[0]in 
c||!c.execScript||c.execScript("var "+a[0]);for(var 
e;a.length&&(e=a.shift());)a.length||void 
0===d?c[e]?c=c[e]:c=c[e]={}:c[e]=d};var l=function(b){var 
d=b.length;if(0<d){for(var a=Array(d),c=0;c<d;c++)a[c]=b[c];return 
a}return[]};var m=function(b){var 
d=window;if(d.addEventListener)d.addEventListener("load",b,!1);else 
if(d.attachEvent)d.attachEvent("onload",b);else{var 
a=d.onload;d.onload=function(){b.call(this);a&&a.call(this)}}};var 
n,p=function(b,d,a,c,e){this.f=b;this.h=d;this.i=a;this.c=e;this.e={height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};this.g=c;this.b={};this.a=[];this.d={}},q=function(b,d){var
 a,c,e=d.getAttribute("pagespeed_url_hash");if(a=e&&!(e in 
b.d))if(0>=d.offsetWidth&&0>=d.offsetHeight)a=!1;else{c=d.getBoundingClientRect();var
 f=document.body;a=c.top+("pageYOffset"in 
window?window.pageYOffset:(document.documentElement||f.parentNode||f).scrollTop);c=c.left+("pageXOffset"in
 
window?window.pageXOffset:(document.documentElement||f.parentNode||f).scrollLeft);f=a.toString()+","+c;b.b.hasOwnProperty(f)?a=!1:(b.b[f]=!0,a=a<=b.e.height&&c<=b.e.width)}a&&(b.a.push(e),b.d[e]=!0)};p.prototype.checkImageForCriticality=function(b){b.getBoundingClientRect&&q(this,b)};h("pagespeed.CriticalImages.checkImageForCriticality",function(b){n.checkImageForCriticality(b)});h("pagespeed.CriticalImages.checkCriticalImages",function(){r(n)});var
 r=function(b){b.b={};for(var 
d=["IMG","INPUT"],a=[],c=0;c<d.length;++c)a=a.concat(l(document.getElementsByTagName(d[c])));if(0!=a.length&&a[0].getBoundingClientRect){for(c=0;d=a[c];++c)q(b,d);a="oh="+b.i;b.c&&(a+="&n="+b.c);if(d=0!=b.a.length)for(a+="&ci="+encodeURIComponent(b.a[0]),c=1;c<b.a.length;++c){var
 
e=","+encodeURIComponent(b.a[c]);131072>=a.length+e.length&&(a+=e)}b.g&&(e="&rd="+encodeURIComponent(JSON.stringify(s())),131072>=a.length+e.length&&(a+=e),d=!0);t=a;if(d){c=b.f;b=b.h;var
 f;if(window.XMLHttpRequest)f=new XMLHttpRequest;else 
if(window.ActiveXObject)try{f=new 
ActiveXObject("Msxml2.XMLHTTP")}catch(k){try{f=new 
ActiveXObject("Microsoft.XMLHTTP")}catch(u){}}f&&(f.open("POST",c+(-1==c.indexOf("?")?"?":"&")+"url="+encodeURIComponent(b)),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(a))}}},s=function(){var
 b={},d=document.getElementsByTagName("IMG");if(0==d.length)return{};var
 a=d[0];if(!("naturalWidth"in a&&"naturalHeight"in a))return{};for(var 
c=0;a=d[c];++c){var e=a.getAttribute("pagespeed_url_hash");e&&(!(e in 
b)&&0<a.width&&0<a.height&&0<a.naturalWidth&&0<a.naturalHeight||e in 
b&&a.width>=b[e].k&&a.height>=b[e].j)&&(b[e]={rw:a.width,rh:a.height,ow:a.naturalWidth,oh:a.naturalHeight})}return
 b},t="";h("pagespeed.CriticalImages.getBeaconData",function(){return 
t});h("pagespeed.CriticalImages.Run",function(b,d,a,c,e,f){var k=new 
p(b,d,a,e,f);n=k;c&&m(function(){window.setTimeout(function(){r(k)},0)})});})();pagespeed.CriticalImages.Run('/mod_pagespeed_beacon','https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?page=4&_=1461375384546','l8PuqRhht8',true,false,'7NHL_z_XgJE');
//]]></script><img alt="design" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/design-cd83b50142b863ee4d70d39efb151d8b.png" title="Design" pagespeed_url_hash="3652635549" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion0" href="#collapse15550326">
          <h3>
            Simplify call to render partial
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/show.html.erb#L2" target="_blank">app/views/attachments/show.html.erb:2 <i class="fa fa-github"></i></a>
       and 2 other locations

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550326" class="accordion-body  collapse ">
    <div class="accordion-inner">

      <section>
        <h4>Occured at</h4>
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/show.html.erb#L2" target="_blank">app/views/attachments/show.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/show.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L9" target="_blank">app/views/pages/index.html.erb:9 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L15" target="_blank">app/views/pages/index.html.erb:15 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

      </section>
      <hr>
    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/attachments/show.html.erb#L2" target="_blank">app/views/attachments/show.html.erb:2 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/attachments/show.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        simplify render in views
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="comment">&lt;!--/show attach --&gt;</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n2" name="n2">2</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">show</span><span class="delimiter">"</span></span>  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span><span class="comment">&lt;!--/show attach --&gt;</span>
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L9" target="_blank">app/views/pages/index.html.erb:9 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        simplify render in views
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n7" name="n7">7</a></span><span class="comment">&lt;!--/Bienvenida --&gt;</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> user_signed_in? <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"> <strong class="highlighted"><a href="#n9" name="n9">9</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">bienvenida</span><span class="delimiter">"</span></span>  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n10" name="n10">10</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span><span class="comment">&lt;!--/bienvenida --&gt;</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>
</pre></div>
</div>

      </section>
      <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/views/pages/index.html.erb#L15" target="_blank">app/views/pages/index.html.erb:15 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/views/pages/index.html.erb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        simplify render in views
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n13" name="n13">13</a></span><span class="comment">&lt;!--/Admin --&gt;</span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> user_signed_in? &amp;&amp; current_user.is_admin?  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><strong class="highlighted"><a href="#n15" name="n15">15</a></strong></span>  <span class="inline"><span class="inline-delimiter">&lt;%=</span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">"</span><span class="content">dashboard</span><span class="delimiter">"</span></span>  <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span><span class="comment">&lt;!--/Admin --&gt;</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>Rails has allowed progressively for simpler ways to render partials, so several
types of calls can now be simplified, such as:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># simple render</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render partial: 'navbar' %&gt;
&lt;%</span><span class="delimiter">=</span></span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">'</span><span class="content">shared/navbar</span><span class="delimiter">'</span></span> %&gt;

<span class="comment"># render partial with object</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render partial: 'books/book', object: @book %&gt;

# render partial with collection
&lt;%</span><span class="delimiter">=</span></span> render <span class="key">partial</span>: <span class="string"><span class="delimiter">'</span><span class="content">post</span><span class="delimiter">'</span></span>, <span class="key">collection</span>: <span class="instance-variable">@books</span> %&gt;

<span class="comment"># render partial with local variables</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render partial: 'chapters/chapter', locals: { parent: book } %&gt;
</span></span></pre></div>
</div>

<p>All of those can and should be called in a simple way.</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Use the simplified versions, which is mostly a single <code class="prettyprint">String</code> parameter.
Basically:</p>

<ol>
<li>Do not specify <code class="prettyprint">:partial</code> anymore, just use the value as first parameter</li>
<li>Rails will use the object name if given an object as parameter (single or
collection) to identify the partial needed.</li>
</ol>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># simple render</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render 'navbar' %&gt;
&lt;%</span><span class="delimiter">=</span></span> render <span class="string"><span class="delimiter">'</span><span class="content">shared/navbar</span><span class="delimiter">'</span></span> %&gt;

<span class="comment"># render partial with object</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render @book %&gt;

# render partial with collection
&lt;%</span><span class="delimiter">=</span></span> render <span class="instance-variable">@books</span> %&gt;

<span class="comment"># render partial with local variables</span>
&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render 'chapters/chapter', parent: book %&gt;
</span></span></pre></div>
</div>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" title="" target="_blank">Using partials in the Rails Guide <i class="fa fa-external-link"></i></a>.</li>
<li><a href="http://blog.8thcolor.com/2013/07/partials-abuse-of-them-dont-abuse-them/" title="" target="_blank">Partials: Abuse of them, don’t abuse them <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Simplify%20call%20to%20render%20partial">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            
          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    <article class="accordion action span12" id="accordion15550327" data-category="style" data-severity="minor" data-language="ruby" data-size="1">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret minor open-badge " data-toggle="collapse" data-target="#collapse15550327" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550327">
            <img alt="style" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/style-ff74ff79f8d1e24f3b07dec0b59d7da4.png" title="Style" pagespeed_url_hash="4013556013" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapse15550327">
          <h3>
            Use spaces instead of tabs
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L21">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L21">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L21" target="_blank">show <i class="fa fa-github"></i></a>
      

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550327" class="accordion-body  collapse ">
    <div class="accordion-inner">

    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L21">UsersController</a>
                    <a href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L21">#</a>
                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/controllers/users_controller.rb#L21" target="_blank">show <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/controllers/users_controller.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        remove tab, use spaces instead
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n19" name="n19">19</a></span>  <span class="comment"># GET /users/1.json</span>
<span class="line-numbers"><a href="#n20" name="n20">20</a></span>  <span class="keyword">def</span> <span class="function">show</span>
<span class="line-numbers"><strong class="highlighted"><a href="#n21" name="n21">21</a></strong></span>          respond_to <span class="keyword">do</span> |format|
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>        format.html { render <span class="string"><span class="delimiter">'</span><span class="content">devise/show</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        format.json { render <span class="string"><span class="delimiter">'</span><span class="content">devise/show</span><span class="delimiter">'</span></span> }
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>    <span class="keyword">end</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>Tabs should not be used inside source code:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># bad</span>
<span class="keyword">class</span> <span class="class">Order</span>
    <span class="keyword">def</span> <span class="function">total</span>
        <span class="instance-variable">@lines</span>.each <span class="keyword">do</span> |line|
            <span class="comment"># more code</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>Different editors and viewers, or different editor settings, might cause tabs to
be displayed differently, which makes them a bad choice for code. Mixing tabs
and spaces is even worse, as it can make lines appear to have been modified even
if they have  not.</p>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Rails practices favor the <em>two spaces</em> as the default indentation:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># bad</span>
<span class="keyword">class</span> <span class="class">Order</span>
  <span class="keyword">def</span> <span class="function">total</span>
    <span class="instance-variable">@lines</span>.each <span class="keyword">do</span> |line|
      <span class="comment"># more code</span>
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>The editor is the best place to set up this (for example, to put two spaces
when the <code class="prettyprint">tab</code> key is pressed) to avoid any issues when committing or
diffing.</p>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li><a href="http://www.sublimetext.com/docs/2/indentation.html" title="" target="_blank">Sublime Text Indentation settings <i class="fa fa-external-link"></i></a></li>
<li><a href="https://github.com/bbatsov/ruby-style-guide#source-code-layout" title="" target="_blank">Ruby Style Guide: Source code layout <i class="fa fa-external-link"></i></a></li>
<li><a href="http://stackoverflow.com/questions/9231688/is-the-tab-character-bad-in-source-code" title="" target="_blank">Tab vs Spaces discussion on Stack Overflow <i class="fa fa-external-link"></i></a></li>
<li><a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/h%20ttps://github.com/glennr/uber-glory-tmbundle" title="" target="_blank">TextMate bundle to remove tabs <i class="fa fa-external-link"></i></a></li>
<li><a href="https://gist.github.com/torsten/3706787" title="" target="_blank">Git hook replacing tabs by spaces <i class="fa fa-external-link"></i></a> - among other things.</li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Use%20spaces%20instead%20of%20tabs">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            
          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

    </section>
    <section class="section-info row">
    <article class="accordion action span12" id="accordion15550331" data-category="design" data-severity="info" data-language="ruby" data-size="1">
  <header>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="pull-left">

          <a class="btn open-caret info open-badge " data-toggle="collapse" data-target="#collapse15550331" title="More about it : code snippet, location, why, how to fix and references.">
            <i class="fa fa-caret-right"></i>
          </a>

          <a class="open-badge" data-toggle="collapse" data-target="#collapse15550331">
            <img alt="design" class="badges-types" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/design-cd83b50142b863ee4d70d39efb151d8b.png" title="Design" pagespeed_url_hash="3652635549" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
          </a>
        </div>

        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse15550331">
          <h3>
            Remove empty helper
          </h3>
          </a>

        <div class="code-wrapper">
          <code>
                                <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/helpers/attachments_helper.rb#L1" target="_blank">app/helpers/attachments_helper.rb:1 <i class="fa fa-github"></i></a>
      

          </code>
        </div>

      </div>
    </div>

  </header>


  <div id="collapse15550331" class="accordion-body  collapse ">
    <div class="accordion-inner">

    <section>
              <section class="code_snippet">
          <div class="row">
  <div class="span4">
  <p><code>                    <a class="active" href="https://github.com/matiasmasca/novedades/blob/031aa6c34e9c57ef53ec00ca259a69aecf6c6725/app/helpers/attachments_helper.rb#L1" target="_blank">app/helpers/attachments_helper.rb:1 <i class="fa fa-github"></i></a>
      
</code></p>
  </div>
  <div class="pull-right">
   <a href="https://www.pullreview.com/github/matiasmasca/novedades/reviews/master?file=app/helpers/attachments_helper.rb">All issues for this file</a>
  </div>
</div>

      <h4>Detailed message</h4>
      <p>
        remove empty helpers
      </p>
          <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><strong class="highlighted"><a href="#n1" name="n1">1</a></strong></span><span class="keyword">module</span> <span class="class">AttachmentsHelper</span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span><span class="keyword">end</span>
</pre></div>
</div>

      </section>

    </section>
      <section class="why">
        <h4>Why</h4>
          <p>With Rails <em>scaffolding</em>, you can quickly create a model, a controller, and a
view for one resource with a single command. At the same time, this also
generates an empty dedicated helper, as follows (with its companion test file):</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># app/helpers/book_helper.rb</span>
<span class="keyword">module</span> <span class="class">BooksHelper</span>
<span class="keyword">end</span>

<span class="comment"># test/unit/helpers/book_helper_test.rb</span>
<span class="keyword">class</span> <span class="class">BooksHelperTests</span> &lt; <span class="constant">MiniTest</span>::<span class="constant">Unit</span>
<span class="keyword">end</span>
</pre></div>
</div>

<p>This is the most probable reason for the existence of your empty helper. But
it's not good to keep it in your code base, because:</p>

<ol>
<li>It will be still loaded by Rails,</li>
<li>Its test will be run even if empty, and</li>
<li>It's a bad habit to keep useless code: when asking for driving directions, would you
like to get random information in the middle of the explanation?</li>
</ol>

      </section>

      <section class="how">
        <h4>How to fix</h4>
          <p>Remove the empty helpers and their empty tests.</p>

<p>In Rails 3, you can set it to not generate helpers automatically:</p>
<div class="CodeRay">
  <div class="code"><pre><span class="comment"># config/application.rb</span>
config.generators.helper = <span class="predefined-constant">false</span>
</pre></div>
</div>

      </section>

      <section class="references">
        <h4>More info</h4>
          <ul>
<li><a href="http://guides.rubyonrails.org/command_line.html#rails-generate" title="" target="_blank">Rails Generators options <i class="fa fa-external-link"></i></a></li>
</ul>

        <p><i class="fa fa-lightbulb-o fa-lg"></i>Know a good reference on this subject ? <a target="_blank" href="mailto:support@pullreview.com?subject=Reference%20for%20rule%3A%20Remove%20empty%20helper">Tell us about it!</a>
        </p>
      </section>
      <footer>
        <div class="pull-right">
          <section class="attribution">
            
          </section>
        </div>
      </footer>

    </div>
  </div>

</article>

  </section>



</div>
<script>$.ajax({url:"/github/matiasmasca/novedades/reviews/master?page=4",cache:false,success:function(html){$("#more-violations-4").empty().append(html);messages.enableMessages("#more-violations-4")
actions.setup_ignore_rule("#more-violations-4")
actions.display_all_coverage($("#more-violations-4"))}});</script>


</div>
<script>$.ajax({url:"/github/matiasmasca/novedades/reviews/master?page=3",cache:false,success:function(html){$("#more-violations-3").empty().append(html);messages.enableMessages("#more-violations-3")
actions.setup_ignore_rule("#more-violations-3")
actions.display_all_coverage($("#more-violations-3"))}});</script>


</div>
<script>$.ajax({url:"/github/matiasmasca/novedades/reviews/master?page=2",cache:false,success:function(html){$("#more-violations-2").empty().append(html);messages.enableMessages("#more-violations-2")
actions.setup_ignore_rule("#more-violations-2")
actions.display_all_coverage($("#more-violations-2"))}});</script>

</section>

    </div>

  <footer>
  <div class="container">
    <div class="row">
      <div class="span3">
        

        <p>Copyright&nbsp;©&nbsp;2013-2015&nbsp;8th&nbsp;Color&nbsp;SPRL
        <br>
        Made in Brussels with pride <img alt="Made in Brussels" src="PullReview%20%7C%20Review%20of%20branch%20master_archivos/iris-05c11a17fa1a91c34b31ea84119c99c9.png" pagespeed_url_hash="3595096946" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
      </p>
      </div>

      <div class="span9">
        <nav class="pull-right">
          <ul class="nav user-nav">
            <li><a href="https://www.pullreview.com/site/security">Security</a></li>
            <li><a href="https://www.pullreview.com/site/tos">Terms</a></li>
            <li><a href="https://www.pullreview.com/site/privacy">Privacy</a></li>
            <li><a href="https://www.pullreview.com/site/credits">Credits</a></li>
            <li><a href="mailto:support@pullreview.com">support@pullreview.com</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</footer>

  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
 
Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-23242310-6','pullreview.com');ga('send','pageview');</script>
  


</body></html>